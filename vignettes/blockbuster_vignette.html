<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Matthew Gregory" />

<meta name="date" content="2017-05-17" />

<title>Blockbuster modelling: wow; what a difference!</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">Blockbuster modelling: wow; what a difference!</h1>
<h4 class="author"><em>Matthew Gregory</em></h4>
<h4 class="date"><em>2017-05-17</em></h4>



<blockquote>
<p>Can I have a P please, Bob?. (<a href="http://www.bbc.co.uk/news/entertainment-arts-16447409">via</a>)</p>
</blockquote>
<div id="modelling-deterioration-of-the-school-estate-using-discrete-time-markov-chains" class="section level2">
<h2>Modelling deterioration of the School Estate using Discrete-Time Markov chains</h2>
<p>A useful package of functions and sample data to forecast the future condition of School blocks (or buildings) in the UK.</p>
<div id="modelling-overview" class="section level3">
<h3>Modelling overview</h3>
<p>Markov chains represent a class of stochastic processes of great interest for the wide spectrum of practical applications. In particular, discrete time <a href="https://cran.r-project.org/web/packages/markovchain/vignettes/an_introduction_to_markovchain_package.pdf">Markov chains</a> (DTMC) permit to model the transition probabilities between discrete states by the aid of matrices. The states are represented by the <code>grade</code> factor which is the surveyed condition of a building element, determined by a quantity surveyor through grades (states); N, A, B, C, D, E. The transition probabilities are 6 by 6 matrices with the average deterioration rate per timestep between states provided by expert building consultant opinion (see documentation for full details).</p>
</div>
<div id="business-questions-it-can-answer" class="section level3">
<h3>Business questions it can answer</h3>
<p>This package is useful for decision makers as it provides a modelling approach for predicting the average condition of an individual building component (<code>elementid</code>) through time. This modelling approach can be scaled through a decision making hierarchy, with modelling the deterioration at the level of a School block (<code>buildingid</code>), for each site (<code>siteid</code>), the School (which may be made of many blocks, <code>urn</code>; omitted for anonymity), at the Local Authority (LA) level (<code>lano</code>) and at the National level given suitable input data (filter desired rows using the <code>dplyr</code> package is recommended).</p>
<p>The <code>blockbuster</code> function can be used on more than one row of what I call a <code>blockbuster_tibble</code> through more than one year, storing all the data of intermediary years. This flexibility allows decision makers to ask many and varied questions of the output data.</p>
</div>
</div>
<div id="loading-the-packages" class="section level2">
<h2>Loading the packages</h2>
<p>Check you have these packages installed and then load them into memory using <code>library()</code> <code>require()</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#  You could load tidyverse or you can load the individual packages, one-at-a-time.</span>

<span class="kw">library</span>(dplyr)  <span class="co">#  need pipe %&gt;%</span>
<span class="kw">library</span>(ggplot2)  <span class="co">#  for visualisation</span>
<span class="kw">library</span>(markovchain)  <span class="co">#  Recommended for markovchain S4 object handling (advanced).</span>

<span class="kw">library</span>(blockbuster)  <span class="co">#  Required.</span>

<span class="kw">library</span>(ggthemes)  <span class="co">#  Make pretty output with little effort.</span></code></pre></div>
</div>
<div id="inputs-and-outputs-overview" class="section level2">
<h2>Inputs and Outputs Overview</h2>
<p>Remember to use the R help for all of the functions and data mentioned in the vignette for extra detail (e.g. try typing <code>?blockbuster</code> and <code>?blockbuster_pds</code> into the console).</p>
<div id="input-variables-of-each-building-component" class="section level3">
<h3>Input variables of each building component</h3>
<p>Provided with this package is ten percent sampled data with identifying features removed (the school Unique Reference Number). We suggest loading the <code>tidyverse</code> package when handling this data. This object is a tibble called by <code>blockbuster_pds</code>. For creating a subset of this data to make it manageable for simulation, use the <a href="https://cran.rstudio.com/web/packages/dplyr/vignettes/introduction.html">dplyr package</a>.</p>
<p>The <code>areafy2</code> function was used on data queried from the Department for Education Education Funding Authority Property Data Survey SQL data tables (see 01_read_and_tidy_data.R for details). This provides estimates for the <code>unit_area</code> (a quantification of how much of a building component there is) variable. This is crucial for the DTMC methodology and for quantifying the costs of repairs.</p>
<p>We take a look at the transpose of the data table which describes the dimensions of our sample data and the type of variables found therein. Note the <code>cost_sum</code> variable which is an aggregation of the initial costs estimated in the block or <code>buildingid</code> that that row is associated with (this variable is set to zero for <code>timestep</code> greater than zero).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dplyr::<span class="kw">glimpse</span>(blockbuster_pds)</code></pre></div>
<pre><code>## Observations: 254,878
## Variables: 25
## $ lano                  &lt;int&gt; 331, 331, 331, 331, 331, 331, 331, 331, ...
## $ siteid                &lt;int&gt; 1266, 1266, 1266, 1266, 1266, 1266, 1266...
## $ buildingid            &lt;int&gt; 4382, 4382, 4382, 4382, 4382, 4382, 4382...
## $ elementid             &lt;int&gt; 1700, 1701, 1706, 1972, 1719, 1714, 1716...
## $ element               &lt;fctr&gt; Roofs, Roofs, Roofs, Roofs, Roofs, Roof...
## $ sub_element           &lt;fctr&gt; Structure, Structure, Coverings and ins...
## $ const_type            &lt;fctr&gt; Flat roof  structure and deck - General...
## $ const_type_accessible &lt;fctr&gt; No, No, Yes, Yes, Yes, Yes, Yes, Yes, Y...
## $ grade                 &lt;fctr&gt; A, A, B, B, A, C, A, B, B, A, B, A, A, ...
## $ cost                  &lt;dbl&gt; 0.00, 0.00, 3910.23, 10335.08, 0.00, 672...
## $ composition           &lt;dbl&gt; 0.30, 0.70, 0.30, 0.70, 0.35, 0.30, 0.35...
## $ storeys               &lt;dbl&gt; 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3...
## $ gifa                  &lt;dbl&gt; 1916, 1916, 1916, 1916, 1916, 1916, 1916...
## $ ground_gifa           &lt;dbl&gt; 1028, 1028, 1028, 1028, 1028, 1028, 1028...
## $ block_perimeter       &lt;dbl&gt; 167, 167, 167, 167, 167, 167, 167, 167, ...
## $ height                &lt;dbl&gt; 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8...
## $ windows_doors         &lt;dbl&gt; 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, ...
## $ number_lifts          &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0...
## $ site_area_exc_field   &lt;dbl&gt; 2100, 2100, 2100, 2100, 2100, 2100, 2100...
## $ boundary_length       &lt;dbl&gt; 250, 250, 250, 250, 250, 250, 250, 250, ...
## $ field_area            &lt;dbl&gt; 1000, 1000, 1000, 1000, 1000, 1000, 1000...
## $ swimming_pool         &lt;fctr&gt; No, No, No, No, No, No, No, No, No, No,...
## $ timestep              &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0...
## $ unit_area             &lt;dbl&gt; 308.4, 719.6, 308.4, 719.6, 359.8, 308.4...
## $ cost_sum              &lt;dbl&gt; 133987, 133987, 133987, 133987, 133987, ...</code></pre>
</div>
<div id="the-output-variables-compared-to-the-input" class="section level3">
<h3>The output variables compared to the input</h3>
<p>The output of the <code>blockbuster</code> function is a list of dataframes. The number of dataframes is equivalent to the number of years simulated plus one. The output is of the custom class <code>blockbuster_list</code> (derivative to list) and contains all the variables from the input initial <code>blockbuster_tibble</code>. Here we simulate the deterioration of ten building components through one year. We are interested in the variables of a simulated PDS produced by our <code>blockbuster</code> model using default arguments.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#  output demonstration</span>
dplyr::<span class="kw">glimpse</span>(  <span class="co">#  this function makes the output nicer to read</span>
  <span class="kw">blockbuster</span>(<span class="dt">blockbuster_tibble =</span> blockbuster_pds[<span class="dv">1</span>:<span class="dv">10</span>, ],  <span class="co">#  ten rows for demo</span>
                           <span class="dt">forecast_horizon =</span> <span class="dv">1</span>)  <span class="co">#  We deteriorate through one year</span>
               [[<span class="dv">2</span>]])  <span class="co">#  The initial data at timestep 0 is held in [[1]]</span></code></pre></div>
<pre><code>## Observations: 20
## Variables: 27
## $ lano                  &lt;int&gt; 331, 331, 331, 331, 331, 331, 331, 331, ...
## $ siteid                &lt;int&gt; 1266, 1266, 1266, 1266, 1266, 1266, 1266...
## $ buildingid            &lt;int&gt; 4382, 4382, 4382, 4382, 4382, 4382, 4382...
## $ elementid             &lt;int&gt; 1928, 1928, 1924, 1924, 1922, 1922, 1706...
## $ element               &lt;fctr&gt; Fixed Furniture and Fittings, Fixed Fur...
## $ sub_element           &lt;fctr&gt; Non-teaching - Catering kitchen, Non-te...
## $ const_type            &lt;fctr&gt; Generally, Generally, Generally, Genera...
## $ const_type_accessible &lt;fctr&gt; Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes,...
## $ grade                 &lt;fctr&gt; A, B, B, C, B, C, B, C, B, C, C, D, A, ...
## $ cost                  &lt;dbl&gt; 0.00000, 2794.87919, 16367.57346, 9516.0...
## $ composition           &lt;dbl&gt; 0.05, 0.05, 0.60, 0.60, 0.05, 0.05, 0.30...
## $ storeys               &lt;dbl&gt; 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3...
## $ gifa                  &lt;dbl&gt; 1916, 1916, 1916, 1916, 1916, 1916, 1916...
## $ ground_gifa           &lt;dbl&gt; 1028, 1028, 1028, 1028, 1028, 1028, 1028...
## $ block_perimeter       &lt;dbl&gt; 167, 167, 167, 167, 167, 167, 167, 167, ...
## $ height                &lt;dbl&gt; 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8...
## $ windows_doors         &lt;dbl&gt; 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, ...
## $ number_lifts          &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0...
## $ site_area_exc_field   &lt;dbl&gt; 2100, 2100, 2100, 2100, 2100, 2100, 2100...
## $ boundary_length       &lt;dbl&gt; 250, 250, 250, 250, 250, 250, 250, 250, ...
## $ field_area            &lt;dbl&gt; 1000, 1000, 1000, 1000, 1000, 1000, 1000...
## $ swimming_pool         &lt;fctr&gt; No, No, No, No, No, No, No, No, No, No,...
## $ timestep              &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1...
## $ cost_sum              &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0...
## $ concated              &lt;chr&gt; &quot;Fixed Furniture and FittingsNonteaching...
## $ unit_area             &lt;dbl&gt; 83.51748, 12.28252, 985.83948, 163.76052...
## $ block_rebuild_cost    &lt;dbl&gt; 2440984, 2440984, 2440984, 2440984, 2440...</code></pre>
<p>This output has foreign key variables with the suffix -id, that could be joined to other data from relevant SQL data tables (e.g. the user could find the <code>urn</code> by joining on <code>siteid</code> from an appropriate data table). The <code>urn</code> is omitted to maintain the anonymity of each school’s condition included in the sample.</p>
<p>Importantly the simulated PDS output has an additional variable called <code>block_rebuild_cost</code>; that is the expected cost of rebuild for the whole <code>buildingid</code> associated with that building component given the expected <code>rebuild_cost_rate</code> argument passed to the <code>blockbuster</code> function (we use the default here which is £ 1274 / metre squared).</p>
<div id="generic-methods" class="section level4">
<h4>Generic methods</h4>
<p>The generic functions <code>plot()</code>, <code>boxplot()</code> and <code>summary()</code> can be used on the ouput object of class <code>blockbuster_list</code>. These are detailed later in the vignette.</p>
</div>
</div>
<div id="the-default-arguments" class="section level3">
<h3>The default arguments</h3>
<p>In the example above we passed the <code>blockbuster</code> function only two arguments and it still worked! That is because if you do not explicitly state some of the arguments it will assume default values for these. We can look at the defaults using the <code>formals</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">formals</span>(blockbuster)</code></pre></div>
<pre><code>## $blockbuster_tibble
## 
## 
## $forecast_horizon
## 
## 
## $rebuild_monies
## [1] 0
## 
## $repair_monies
## [1] 0
## 
## $rebuild_cost_rate
## [1] 1274</code></pre>
<p>The arguments <code>blockbuster_tibble</code> and <code>forecast_horizon</code> do not have defaults thus we must pass them to the blockbuster function.</p>
<p>For more detail try typing <code>?blockbuster</code> into the console.</p>
</div>
</div>
<div id="the-transition-probability-data" class="section level2">
<h2>The transition probability data</h2>
<p>The deterioration rates can be called by using either the tibble <code>blockbuster_det_data</code> or the <code>markovchainList</code> object <code>blockbuster_mc_list</code>. For example let’s inspect an example of each.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">blockbuster_det_data[<span class="dv">2</span>, ]</code></pre></div>
<pre><code>## # A tibble: 1 × 9
##   element sub_element                         const_type    na      ab
##     &lt;chr&gt;       &lt;chr&gt;                              &lt;chr&gt; &lt;dbl&gt;   &lt;dbl&gt;
## 1   Roofs   STRUCTURE PITCHED ROOF STRUCTURE - GENERALLY   0.5 0.02051
## # ... with 4 more variables: bc &lt;dbl&gt;, cd &lt;dbl&gt;, de &lt;dbl&gt;,
## #   concated_det &lt;chr&gt;</code></pre>
<p>This identifies the building component through the <code>element</code>, <code>sub_elment</code> and <code>const_type</code>. The “two-letter” variables describe the transition rate or probability from the first letter condition grade to the second letter condition grade. For example, for this building component (here <code>concated_det</code>), the <code>cd</code> describes the proportion of the <code>unit_area</code> at <code>grade == C</code> that will transition to <code>grade == D</code> through one timestep or year (<code>na</code> means from New to A (excellent condition) and is not to be confused with <code>NA</code>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">blockbuster_mc_list@markovchains[[<span class="dv">2</span>]]</code></pre></div>
<pre><code>## Roofs_STRUCTURE_PITCHED ROOF STRUCTURE - GENERALLY 
##  A  6 - dimensional discrete Markov Chain defined by the following states: 
##  n, a, b, c, d, e 
##  The transition matrix  (by rows)  is defined as follows: 
##     n       a       b       c       d       e
## n 0.5 0.50000 0.00000 0.00000 0.00000 0.00000
## a 0.0 0.97949 0.02051 0.00000 0.00000 0.00000
## b 0.0 0.00000 0.96581 0.03419 0.00000 0.00000
## c 0.0 0.00000 0.00000 0.91795 0.08205 0.00000
## d 0.0 0.00000 0.00000 0.00000 0.86325 0.13675
## e 0.0 0.00000 0.00000 0.00000 0.00000 1.00000</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># isS4(blockbuster_mc_list@markovchains[[1]])  #  TRUE</span></code></pre></div>
<p><code>blockbuster_mc_list</code> is a S4 object so the data needs to be accessed through its slots. They hold the same data in different ways. The S4 method may be useful in the future when incorporating some functions from the <code>markovchain</code> package.</p>
</div>
<div id="the-blockbuster-functions" class="section level2">
<h2>The blockbuster functions</h2>
<p>We consider the first row of this sampled data which is a roof of excellent <code>grade</code> A condition with a <code>unit_area</code> of 308.4.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span>blockbuster_pds[<span class="dv">1</span>, ]
dplyr::<span class="kw">select</span>(x, element, sub_element, const_type, grade, unit_area)</code></pre></div>
<pre><code>## # A tibble: 1 × 5
##   element sub_element                                const_type  grade
##    &lt;fctr&gt;      &lt;fctr&gt;                                    &lt;fctr&gt; &lt;fctr&gt;
## 1   Roofs   Structure Flat roof  structure and deck - Generally      A
## # ... with 1 more variables: unit_area &lt;dbl&gt;</code></pre>
</div>
<div id="inspecting-the-associated-deterioration-rates" class="section level2">
<h2>Inspecting the associated deterioration rates</h2>
<p>To determine which transition matrix is associated with each row we use the <code>det_what_tm()</code> function. This produces an error if the <code>markovchain</code> object does not exist. This used to work by concatenating the <code>element</code>, <code>sub_elment</code> and <code>const_type</code> and matching with the <code>concated_det</code> we saw earlier. However, to speed up the efficiency of the code, the <code>concated</code> variable is now cached before the for loop in the <code>blockbuster</code> function. This requires a modified input for this function prior to look up of the associated deterioration rates.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mc1 &lt;-<span class="st"> </span><span class="kw">det_what_tm</span>(dplyr::<span class="kw">mutate_</span>(x, 
                                  <span class="dt">concated =</span> ~<span class="kw">gsub</span>(<span class="dt">pattern =</span> <span class="st">&quot;[^[:alnum:] ]&quot;</span>,
                                    <span class="dt">replacement =</span> <span class="st">&quot;&quot;</span>,
                                    <span class="kw">paste</span>(element, sub_element, const_type,
                                     <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>))))
mc1</code></pre></div>
<pre><code>## Roofs_STRUCTURE_Flat roof  structure and deck - Generally 
##  A  6 - dimensional discrete Markov Chain defined by the following states: 
##  n, a, b, c, d, e 
##  The transition matrix  (by rows)  is defined as follows: 
##     n     a       b       c       d       e
## n 0.5 0.500 0.00000 0.00000 0.00000 0.00000
## a 0.0 0.953 0.04700 0.00000 0.00000 0.00000
## b 0.0 0.000 0.92166 0.07834 0.00000 0.00000
## c 0.0 0.000 0.00000 0.81199 0.18801 0.00000
## d 0.0 0.000 0.00000 0.00000 0.68664 0.31336
## e 0.0 0.000 0.00000 0.00000 0.00000 1.00000</code></pre>
<p>This is a <code>markovchain</code> object as described in the documentation of that package. It is a S4 object and we can access different components using slots and <code>[</code> sub-setting.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mc1@transitionMatrix[, ]  <span class="co">#  [i, j] i for row, j column</span></code></pre></div>
<pre><code>##     n     a       b       c       d       e
## n 0.5 0.500 0.00000 0.00000 0.00000 0.00000
## a 0.0 0.953 0.04700 0.00000 0.00000 0.00000
## b 0.0 0.000 0.92166 0.07834 0.00000 0.00000
## c 0.0 0.000 0.00000 0.81199 0.18801 0.00000
## d 0.0 0.000 0.00000 0.00000 0.68664 0.31336
## e 0.0 0.000 0.00000 0.00000 0.00000 1.00000</code></pre>
</div>
<div id="deteriorating-through-time" class="section level2">
<h2>Deteriorating through time</h2>
<p>Typically the user will be interested in a subset of the data. Consult the <code>dplyr</code> vignette for handling and sub-setting your data based on desired filter conditions.</p>
<p>Here we demonstrate the deterioration of a single element through time. We chose a critical building feature of one particular block or building we are interested in.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_wall &lt;-<span class="st"> </span>dplyr::<span class="kw">filter</span>(blockbuster_pds,
                         buildingid ==<span class="st"> </span><span class="dv">4382</span>, sub_element ==<span class="st"> &quot;Walls - Structure&quot;</span>, 
                         const_type ==<span class="st"> &quot;Brick / block&quot;</span>)

my_wall_next_year &lt;-<span class="st"> </span><span class="kw">blockbuster</span>(my_wall, <span class="dv">1</span>)
my_wall_next_year</code></pre></div>
<pre><code>## [[1]]
## # A tibble: 1 × 26
##    lano siteid buildingid elementid                           element
##   &lt;int&gt;  &lt;int&gt;      &lt;int&gt;     &lt;int&gt;                            &lt;fctr&gt;
## 1   331   1266       4382      1828 External Walls, Windows and Doors
## # ... with 21 more variables: sub_element &lt;fctr&gt;, const_type &lt;fctr&gt;,
## #   const_type_accessible &lt;fctr&gt;, grade &lt;fctr&gt;, cost &lt;dbl&gt;,
## #   composition &lt;dbl&gt;, storeys &lt;dbl&gt;, gifa &lt;dbl&gt;, ground_gifa &lt;dbl&gt;,
## #   block_perimeter &lt;dbl&gt;, height &lt;dbl&gt;, windows_doors &lt;dbl&gt;,
## #   number_lifts &lt;dbl&gt;, site_area_exc_field &lt;dbl&gt;, boundary_length &lt;dbl&gt;,
## #   field_area &lt;dbl&gt;, swimming_pool &lt;fctr&gt;, timestep &lt;int&gt;,
## #   unit_area &lt;dbl&gt;, cost_sum &lt;dbl&gt;, concated &lt;chr&gt;
## 
## [[2]]
## # A tibble: 2 × 27
##    lano siteid buildingid elementid                           element
##   &lt;int&gt;  &lt;int&gt;      &lt;int&gt;     &lt;int&gt;                            &lt;fctr&gt;
## 1   331   1266       4382      1828 External Walls, Windows and Doors
## 2   331   1266       4382      1828 External Walls, Windows and Doors
## # ... with 22 more variables: sub_element &lt;fctr&gt;, const_type &lt;fctr&gt;,
## #   const_type_accessible &lt;fctr&gt;, grade &lt;fctr&gt;, cost &lt;dbl&gt;,
## #   composition &lt;dbl&gt;, storeys &lt;dbl&gt;, gifa &lt;dbl&gt;, ground_gifa &lt;dbl&gt;,
## #   block_perimeter &lt;dbl&gt;, height &lt;dbl&gt;, windows_doors &lt;dbl&gt;,
## #   number_lifts &lt;dbl&gt;, site_area_exc_field &lt;dbl&gt;, boundary_length &lt;dbl&gt;,
## #   field_area &lt;dbl&gt;, swimming_pool &lt;fctr&gt;, timestep &lt;dbl&gt;,
## #   cost_sum &lt;dbl&gt;, concated &lt;chr&gt;, unit_area &lt;dbl&gt;,
## #   block_rebuild_cost &lt;dbl&gt;
## 
## attr(,&quot;class&quot;)
## [1] &quot;blockbuster_list&quot; &quot;list&quot;            
## attr(,&quot;rebuild_cost_rate&quot;)
## [1] 1274
## attr(,&quot;rebuild_monies&quot;)
## [1] 0
## attr(,&quot;repair_monies&quot;)
## [1] 0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_wall_20year &lt;-<span class="st"> </span><span class="kw">blockbuster</span>(my_wall, <span class="dv">20</span>)</code></pre></div>
<p>This produces a <a href="https://twitter.com/hadleywickham/status/643381054758363136">list of tibbles</a>. Each tibble provides the condition of the input tibble at that timestep. Notice how the number of rows has increased. That’s because we have a row for each <code>grade</code> state and associated <code>unit_area</code>. The first tibble in the list is for the input data or <code>timestep == 0</code>. It is prudent to check the timestep by inspecting it.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_wall_next_year[[<span class="dv">2</span>]]</code></pre></div>
<pre><code>## # A tibble: 2 × 27
##    lano siteid buildingid elementid                           element
##   &lt;int&gt;  &lt;int&gt;      &lt;int&gt;     &lt;int&gt;                            &lt;fctr&gt;
## 1   331   1266       4382      1828 External Walls, Windows and Doors
## 2   331   1266       4382      1828 External Walls, Windows and Doors
## # ... with 22 more variables: sub_element &lt;fctr&gt;, const_type &lt;fctr&gt;,
## #   const_type_accessible &lt;fctr&gt;, grade &lt;fctr&gt;, cost &lt;dbl&gt;,
## #   composition &lt;dbl&gt;, storeys &lt;dbl&gt;, gifa &lt;dbl&gt;, ground_gifa &lt;dbl&gt;,
## #   block_perimeter &lt;dbl&gt;, height &lt;dbl&gt;, windows_doors &lt;dbl&gt;,
## #   number_lifts &lt;dbl&gt;, site_area_exc_field &lt;dbl&gt;, boundary_length &lt;dbl&gt;,
## #   field_area &lt;dbl&gt;, swimming_pool &lt;fctr&gt;, timestep &lt;dbl&gt;,
## #   cost_sum &lt;dbl&gt;, concated &lt;chr&gt;, unit_area &lt;dbl&gt;,
## #   block_rebuild_cost &lt;dbl&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(my_wall_next_year[[<span class="dv">2</span>]]$timestep, <span class="dv">1</span>)  <span class="co">#  1 timestep later than initial</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
</div>
<div id="blockbusting-through-many-rows" class="section level2">
<h2>Blockbusting through many rows</h2>
<p>The same principle applies as above where we pass the <code>blockbuster</code> function an input tibble object and the number of years into the future (relative to when the data was collected) we want to model to.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">y &lt;-<span class="st"> </span>blockbuster_pds[<span class="dv">1</span>:<span class="dv">20</span>, ]  <span class="co">#  select all rows associated with decision level of interest, perhaps one block or one LA?</span>
my_block_10years &lt;-<span class="st"> </span><span class="kw">blockbuster</span>(y, <span class="dv">10</span>)
dplyr::<span class="kw">select</span>(my_block_10years[[<span class="dv">11</span>]],
              buildingid, elementid, grade, unit_area) %&gt;%
<span class="st">  </span>dplyr::<span class="kw">arrange</span>(elementid, grade)</code></pre></div>
<pre><code>## # A tibble: 89 × 4
##    buildingid elementid  grade   unit_area
##         &lt;int&gt;     &lt;int&gt; &lt;fctr&gt;       &lt;dbl&gt;
## 1        4382      1700      A 190.5651038
## 2        4382      1700      B  81.2268898
## 3        4382      1700      C  21.7992880
## 4        4382      1700      D   8.2638365
## 5        4382      1700      E   6.5448820
## 6        4382      1701      A 584.9129266
## 7        4382      1701      B 115.0598531
## 8        4382      1701      C  15.7167642
## 9        4382      1701      D   3.0563950
## 10       4382      1701      E   0.8540611
## # ... with 79 more rows</code></pre>
</div>
<div id="computation-time" class="section level2">
<h2>Computation time</h2>
<p>I suggest you spend time thinking about the precise question you are asking rather than using the whole <code>blockbuster_pds</code> tibble as input due to non-trivial computation time. As a rule of thumb the amount of rows you start with will be multiplied by five (as each <code>elementid</code> deteriorates to other states), with each of these tibbles being multiplied by the <code>forecast_horizon</code>. That’s quite a lot of data and may tax your computer’s RAM (although the <code>unit_area</code>, <code>timestep</code> and <code>cost</code> will be the only variables changing through time).</p>
</div>
<div id="plotting-output-basics" class="section level2">
<h2>Plotting output basics</h2>
<p>The tibble format is compatible with the <code>tidyverse</code> particularly <code>reshape2</code>-ing and plotting using <code>ggplot2</code>. The <code>purrr</code> package and the excellent <code>map_df()</code> function makes it easy to plot data from multiple dataframes across a list, as is the case with our <code>blockbuster</code> output.</p>
<div id="blockbusting" class="section level3">
<h3>Blockbusting</h3>
<p>We can investigate the rate at which our critical elements are deteriorating or even what proportion of the <code>unit_area</code> is decommisioned. Given the flexibility of the model output we can ask anything of the data.</p>
<p>Here we are interested in tracking the deterioration of critical building components in our block of interest. We recycle the <code>my_wall_20year</code> object for this question. The wall starts as all condition grade B then gradually deteriorates.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p4 &lt;-<span class="st"> </span>my_wall_20year %&gt;%
<span class="st">  </span>purrr::<span class="kw">map_df</span>(
    ~<span class="st"> </span>.x ,
    <span class="dt">.id =</span> <span class="ot">NULL</span>
  ) %&gt;%
<span class="st">  </span>dplyr::<span class="kw">group_by</span>(timestep, grade) %&gt;%
<span class="st">  </span>dplyr::<span class="kw">summarise</span>(<span class="dt">sum_area =</span> <span class="kw">sum</span>(unit_area, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) %&gt;%
<span class="st">  </span>ggplot2::<span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">y =</span> sum_area, <span class="dt">x =</span> grade)) +
<span class="st">  </span>ggplot2::<span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) +
<span class="st">  </span>ggplot2::<span class="kw">facet_wrap</span>(
    ~timestep
  )

p4 +<span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;Estimated area (m^2)&quot;</span>) +<span class="st"> </span><span class="kw">xlab</span>(<span class="st">&quot;Condition grade&quot;</span>) +
<span class="st">  </span>govstyle::<span class="kw">theme_gov</span>() </code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="critical-building-elements" class="section level3">
<h3>Critical building elements</h3>
<p>Typically we may be more interested in critical, structural building-features such as the roof or walls and whether the <code>unit_area</code> exceeds a critical threshold determined by expert opinion. For example, is our wall’s total <code>unit_area</code> after 10 years comprised of over 20% grade D and E? We plot then inspect the numbers.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_wall_10 &lt;-<span class="st"> </span><span class="kw">blockbuster</span>(my_wall, <span class="dv">10</span>)
<span class="co">#  We are interested in the 10 th (+ 1) timestep</span>
df &lt;-<span class="st"> </span>my_wall_10[[<span class="dv">11</span>]]

<span class="co">#  Use gov style for plot, install these if you don't have them</span>
<span class="co"># devtools::install_github('mangothecat/visualTest')  #  required for govstyle</span>
<span class="co"># devtools::install_github(&quot;UKGov-Data-Science/govstyle&quot;)</span>

p &lt;-<span class="st"> </span>ggplot2::<span class="kw">ggplot</span>(<span class="dt">data =</span> df, <span class="kw">aes</span>(<span class="dt">x =</span> grade, <span class="dt">y =</span> unit_area)) +
<span class="st">  </span>ggplot2::<span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="dt">fill =</span> govstyle::gov_cols[<span class="st">'turquoise'</span>]) +
<span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Condition&quot;</span>) +
<span class="st">  </span><span class="kw">ylab</span>(<span class="kw">expression</span>(<span class="kw">paste</span>(
  <span class="st">&quot;Unit area (&quot;</span>,m^<span class="dv">2</span>,
  <span class="st">&quot;)&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>))) +
<span class="st">  </span>govstyle::<span class="kw">theme_gov</span>()

p </code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>We use <code>dplyr</code> to elucidate and determine that our wall is below our arbitrary 20% threshold, if we wanted to scale this we could create a new variable using <code>mutate</code> which is based on a logical test. The only limit is your imagination (and coding skills).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">total_wall_area &lt;-<span class="st"> </span><span class="kw">sum</span>(df$unit_area)
dplyr::<span class="kw">mutate</span>(df, <span class="dt">prop_area =</span> unit_area /<span class="st"> </span>total_wall_area) %&gt;%
<span class="st">  </span>dplyr::<span class="kw">select</span>(grade, unit_area, prop_area)</code></pre></div>
<pre><code>## # A tibble: 4 × 3
##    grade unit_area  prop_area
##   &lt;fctr&gt;     &lt;dbl&gt;      &lt;dbl&gt;
## 1      B 883.40640 0.66621900
## 2      C 283.94409 0.21413581
## 3      D 101.28156 0.07638127
## 4      E  57.36795 0.04326392</code></pre>
</div>
</div>
<div id="costing" class="section level2">
<h2>Costing</h2>
<p>The costing part of the <code>blockbuster</code> function is built using an internal function called <code>blockcoster_lookup</code>. This takes the building component and condition grade information and looks this character string up in the <code>blockbuster_pds_repair_costs</code> tibble, thus finding the appropriate repair costs constant to multiply the <code>unit_area</code> of that building component by.</p>
<p>Originally it returned <code>NA</code> for grade E. This was due to lack of data on repairing a building component from grade E back to A, furthermore as grade E is meant to encapsulate a decommisioned status for now it was deemed more appropriate to only be able to get E back to grade N through rebuilding. However, user feedback suggested it more useful to attempt to approximate the grade E cost using a crude estiamte for now. This was achieved by modifying the code in <code>04_read_tidy_costs_data.R</code>. Costs for E are now simply the costs for D plus five percent. This approach was recommended by Adam Bray until we get empirical estimates.</p>
<p>Costs are calculated for each row. The <code>cost_sum</code> variable is set to zero as this can be recalculated later if required, as it requires an aggregation by <code>buildingid</code> step (this is somewhat technical, see the <code>blockbuster</code> code by the costing step, where aggregation occurs).</p>
<div id="blockcosting" class="section level3">
<h3>Blockcosting</h3>
<p>We continue with the examples from above by considering the aggregated cost of repairs through time. Let us plot the distribution of costs by condition grade using a <a href="https://en.wikipedia.org/wiki/Box_plot#Alternative_forms">Tukey box plot</a> through each year (R and ggplot make it easy to look at the data in different ways). Repair costs from grade A should always be zero as they are already in excellent condition and do not need any work. This plot shows how the median costs for each grade steadily increase year on year with some building components in particularly deteriorating quickly and in a costly fashion (the outliers indicated by the black circles). Note: the comments in the code are there to teach you the basis of this coding approach using the <code>map_df</code> function from the <code>purrr</code> package.</p>
<div id="boxplot-interpretation" class="section level4">
<h4>Boxplot interpretation</h4>
<p>The red “dots” at the end of the boxplot represent outliers. These observations contribute to the total cost of the block much more than others. There are a number of different rules for determining if a point is an outlier, but the method that R and ggplot use is the “1.5 rule”. If a data point is:<br />
* <code>less than Q1 - 1.5 x IQR</code><br />
* <code>greater than Q3 + 1.5 x IQR</code><br />
then that point is classed as an “outlier”. The line goes to the first data point before the “1.5” cut-off. Note: the inter-quartile range; <code>IQR = Q3 - Q1</code>.</p>
<p>We have added a scattered jitterplot on top using <code>geom_point()</code> so that you can see how all the observations contribute to the observed <code>cost</code> distribution.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#  http://www.machinegurning.com/rstats/map_df/</span>

<span class="co"># </span>
<span class="co"># cool_cars &lt;- list(mtcars, mtcars, mtcars) %&gt;%</span>
<span class="co">#   map_df(</span>
<span class="co">#     ~ .x ,</span>
<span class="co">#     .id = &quot;year&quot;</span>
<span class="co">#   ) %&gt;%</span>
<span class="co">#   group_by(&quot;year&quot;) %&gt;%</span>
<span class="co">#   ggplot(aes(x = cyl, y = disp, group = cyl)) +</span>
<span class="co">#   geom_boxplot() +</span>
<span class="co">#   facet_wrap(</span>
<span class="co">#     ~year</span>
<span class="co">#   )</span>
<span class="co"># cool_cars</span>

p2 &lt;-<span class="st"> </span>my_block_10years %&gt;%
<span class="st">  </span>purrr::<span class="kw">map_df</span>(
    ~<span class="st"> </span>.x ,
    <span class="dt">.id =</span> <span class="ot">NULL</span>
  ) %&gt;%
<span class="st">  </span>dplyr::<span class="kw">group_by</span>(<span class="st">&quot;timestep&quot;</span>) %&gt;%
<span class="st">  </span>ggplot2::<span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> grade, <span class="dt">y =</span> cost)) +
<span class="st">  </span>ggplot2::<span class="kw">geom_boxplot</span>(<span class="dt">outlier.colour =</span> <span class="st">&quot;red&quot;</span>) +<span class="st">  </span><span class="co">#  Set to NA to avoid double plot</span>
<span class="st">  </span>ggplot2::<span class="kw">facet_wrap</span>(
    ~timestep
  )

p2 +<span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;Cost of repairs (£)&quot;</span>) +<span class="st"> </span><span class="kw">xlab</span>(<span class="st">&quot;Condition grade&quot;</span>) +
<span class="st">  </span>govstyle::<span class="kw">theme_gov</span>() +<span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">position =</span> <span class="kw">position_jitter</span>(<span class="dt">width =</span> <span class="fl">0.05</span>),
                                     <span class="dt">alpha =</span> <span class="fl">0.15</span>)</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>The same plot is produced using the generic method of <code>boxplot()</code>.</p>
</div>
</div>
<div id="total-blockcosting" class="section level3">
<h3>Total Blockcosting</h3>
<p>We take our hypothetical building and plot the total costs year on year by condition grade. Notice how the costs to repair the hypothetical block increases, accelerating as more and more <code>unit_area</code> gets into grade E.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p3 &lt;-<span class="st"> </span>my_block_10years %&gt;%
<span class="st">  </span>purrr::<span class="kw">map_df</span>(
    ~<span class="st"> </span>.x ,
    <span class="dt">.id =</span> <span class="ot">NULL</span>
  ) %&gt;%
<span class="st">  </span>dplyr::<span class="kw">group_by</span>(timestep, grade) %&gt;%
<span class="st">  </span>dplyr::<span class="kw">summarise</span>(<span class="dt">sum_cost =</span> <span class="kw">sum</span>(cost, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) %&gt;%
<span class="st">  </span>ggplot2::<span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> grade, <span class="dt">y =</span> sum_cost)) +
<span class="st">  </span>ggplot2::<span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) +
<span class="st">  </span>ggplot2::<span class="kw">facet_wrap</span>(
    ~timestep
  )

p3 +<span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;Total cost of repairs (£)&quot;</span>) +<span class="st"> </span><span class="kw">xlab</span>(<span class="st">&quot;Condition grade&quot;</span>) +
<span class="st">  </span>govstyle::<span class="kw">theme_gov</span>() </code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="line-plot" class="section level3">
<h3>Line plot</h3>
<p>The blockbuster output is flexible and amenable to data manipulation and or transformation prior to plotting. The user is only limited by their imagination.</p>
<p>Below we present a standard output that is seen in many reports of the School Estate. Here we plot the total costs by aggregated by condition grade for each year and give it a slightly prettier finish. Note how the condition <code>grade</code> A do not contribute to the cost. However, the repair cost of E (set at D repair cost plus five percent) accelerates the total cost as more building components’ <code>unit_area</code> transitions into grade E from D. It’s important users are aware of this when interpretating these graphics as the estiamted cost of B, C and D should be considered more reliable as they are based on expert opinion and bespoke costs for each building component (whereas E grade is just 5% on D which may not be appropriate for every building component).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p4 &lt;-<span class="st"> </span>my_block_10years %&gt;%
<span class="st">  </span>purrr::<span class="kw">map_df</span>(
    ~<span class="st"> </span>.x ,
    <span class="dt">.id =</span> <span class="ot">NULL</span>
  ) %&gt;%
<span class="st">  </span>dplyr::<span class="kw">group_by</span>(timestep, grade) %&gt;%
<span class="st">  </span>dplyr::<span class="kw">summarise</span>(<span class="dt">sum_cost =</span> <span class="kw">sum</span>(cost, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) %&gt;%
<span class="st">  </span>ggplot2::<span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> timestep, <span class="dt">y =</span> sum_cost, <span class="dt">group =</span> grade, <span class="dt">colour =</span> grade)) +
<span class="st">  </span>ggplot2::<span class="kw">geom_line</span>(<span class="dt">size =</span> <span class="fl">1.3</span>) 
  

p4 +<span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;Total cost of repairs (£)&quot;</span>) +<span class="st"> </span><span class="kw">xlab</span>(<span class="st">&quot;Years after PDS&quot;</span>) +
<span class="st">  </span>govstyle::<span class="kw">theme_gov</span>() +
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) +
<span class="st">  </span><span class="co"># ggthemes::theme_hc() + ggthemes::scale_colour_hc() +</span>
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Cost of repairs through time for our example block&quot;</span>)</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>The same plot is produced using the generic method of <code>plot()</code> on the <code>blockbuster_list</code> object.</p>
</div>
<div id="digging-down" class="section level3">
<h3>Digging down</h3>
<blockquote>
<p>Better to draw several approximate graphics saying something about the right question than to draw one precise graphic relating to the wrong question.</p>
</blockquote>
<p>The <code>blockbuster</code> simulation is time expensive thus we do not want ot generate every possible outcome variable that a user might need. Instead we generate variables that are required for the simulation, for decision making regarding which blocks should be rebuilt or repaired. Instead you can derive variables yourself. Be imaginative and try plenty of variety in your plots.</p>
</div>
<div id="costing-the-rebuilding-of-a-block" class="section level3">
<h3>Costing the rebuilding of a block</h3>
<p>The repair costs had previously ignored decommisioned building components (grade E <code>unit_area</code> of a building component). To incorporate this into our analysis of when it is better to rebuild a block rather than to maintain it we create a new variable in the <code>blockbuster_tibble</code> called <code>block_rebuild_cost</code>. This multiplies the <code>gifa</code>, of the block that the building component in question is part of, by the argument (blockbuster input) <code>rebuild_cost_rate</code> (this has a default value). This does not fully capture the complexity of estimating the rebuild cost of a block and could be enhanced in future iterations of the <code>blockbuster</code>. At the moment it can accept a constant <code>rebuild_cost_rate</code> or varying <code>rebuild_cost_rate</code> (a vector the same length as the argument <code>forecast_horizon</code> that can adjust for inflation). This value is the same for all building components in the same block as it is a function of the block’s <code>gifa</code> (it only makes sense considered at the block level).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">two_blocks_4_years_inflation &lt;-<span class="st"> </span><span class="kw">blockbuster</span>(dplyr::<span class="kw">filter</span>(blockbuster_pds,
                                                              buildingid ==<span class="st"> </span><span class="dv">4382</span> |
<span class="st">                                                                </span>buildingid ==<span class="st"> </span><span class="dv">4472</span>),
                                                <span class="dt">forecast_horizon =</span> <span class="dv">4</span>,
                                                <span class="dt">rebuild_cost_rate =</span> <span class="kw">c</span>(<span class="dv">1274</span>, <span class="dv">1281</span>, <span class="dv">1289</span>, <span class="dv">1296</span>) 
                                                )

two_blocks_4_years_inflation %&gt;%
<span class="st">  </span>purrr::<span class="kw">map_df</span>(
    ~<span class="st"> </span>.x ,
    <span class="dt">.id =</span> <span class="ot">NULL</span>
  ) %&gt;%
<span class="st">  </span>dplyr::<span class="kw">group_by</span>(buildingid, timestep, block_rebuild_cost) %&gt;%
<span class="st">  </span>dplyr::<span class="kw">tally</span>()</code></pre></div>
<pre><code>## Source: local data frame [10 x 4]
## Groups: buildingid, timestep [?]
## 
##    buildingid timestep block_rebuild_cost     n
##         &lt;int&gt;    &lt;dbl&gt;              &lt;dbl&gt; &lt;int&gt;
## 1        4382        0                 NA    48
## 2        4382        1            2440984    96
## 3        4382        2            2454396   144
## 4        4382        3            2469724   190
## 5        4382        4            2483136   213
## 6        4472        0                 NA    41
## 7        4472        1              82810    82
## 8        4472        2              83265   123
## 9        4472        3              83785   164
## 10       4472        4              84240   204</code></pre>
<div id="total-costs-by-building-element" class="section level4">
<h4>Total costs by building element</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p5 &lt;-<span class="st"> </span>my_block_10years %&gt;%
<span class="st">  </span>purrr::<span class="kw">map_df</span>(
    ~<span class="st"> </span>.x ,
    <span class="dt">.id =</span> <span class="ot">NULL</span>
  ) %&gt;%
<span class="st">  </span>dplyr::<span class="kw">group_by</span>(timestep, element) %&gt;%
<span class="st">  </span>dplyr::<span class="kw">summarise</span>(<span class="dt">sum_cost =</span> <span class="kw">sum</span>(cost, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) %&gt;%
<span class="st">  </span>ggplot2::<span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> element, <span class="dt">y =</span> sum_cost)) +
<span class="st">  </span>ggplot2::<span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) +
<span class="st">  </span>ggplot2::<span class="kw">facet_wrap</span>(
    ~timestep
  )

p5 +<span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;Total cost of repairs (£)&quot;</span>) +<span class="st"> </span><span class="kw">xlab</span>(<span class="st">&quot;Building element&quot;</span>) +
<span class="st">  </span>govstyle::<span class="kw">theme_gov</span>() +<span class="st"> </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">90</span>, <span class="dt">hjust =</span> <span class="dv">1</span>)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">plot.margin =</span> <span class="kw">unit</span>(<span class="kw">c</span>(<span class="dv">20</span>,<span class="dv">10</span>,<span class="dv">10</span>,<span class="dv">10</span>),<span class="st">&quot;mm&quot;</span>))</code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA2AAAAJACAMAAADcl/UUAAAA7VBMVEUAAAAAADoAAGYAOjoAOmYAOpAAZrY6AAA6OgA6Ojo6ZmY6ZpA6ZrY6kNtZWVlmAABmOgBmZmZmZoFmZp1mgbZmkGZmkLZmkNtmnc9mtttmtv+BZmaBZoGBZp2BgWaBgbaBnZ2BtueQOgCQZgCQZjqQkGaQ2/+dZmadZoGdZp2dz8+dz/+2ZgC2Zjq2gWa2gYG2gZ22kDq2tp222/+25+e25/+2///PnWbPz53P///bkDrbkGbbtmbb25Db/9vb///ntoHnz8/n57bn////tmb/z53/z8//25D/27b/57b//7b//8///9v//+f///+sKwDfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAek0lEQVR4nO2dDXvb1nmG6TSJ0i1WQ1trnSr9ULZFSaUo61aVs9M1bGXWVSjh//+c4QAgRRpU9B4AL895wPu+Wkcmj+iHAG4A5xOTAgDcmKQOADBmEAzAEQQDcATBABxBMABHEAzAEQQDcATBABxBMABHEAzAEQQDcATBABxBMABHEAzAEQQDcATBABxBMABHEAzAEQQDcATBABxBMABHEAzAEQQDcATBABxBMABHEAzAEQQDcATBABxBMABHEAzAEQQDcATBABxBMABHEAzAEQQDcATBABxBMABHEAzAEQQDcATBABxBMABHEAzAEQQDcATBABxBMABHEAzAEQQDcATBABxBMABHEAzAEQQDcATBABxBMABHEAzAEQQDcATBABxBMABHEAzAEQQDcATBABxBMABHEAzAEQQDcATBABxBMABHEAzAEQQDcATBABxBMABHEAzAEQQDcATBABxBMABHEAzAEQQDcATBABxBMABHEAzAEQQDcATBABxBMABHEAzAEQQDcERYsO+PJs8+Tx2iC28mz1NHiObuj+XW/vSH1DFiuft2kvgg0RXszSTw69Qx4nk7ERTsstraH6eOEctl8oNEVrAffzF5fnc5+UjtpBrOqXqCvTuafF6e0p59lTpIHP8MB8m/Jz0vyAr27qjc228nH/w5dZBILic/+0RPsLeflBu6tEzwhuHuSwTrQuVWZZkW3/7yr1/qCVbxVu4KVlTX3n9NeZejLpjgOfVOVLDyplyuDlYJ9mHK0wKC7R1RwX78TPECVoTWsJT1CHXBBPe5pmCyfiU+SGQFU23kEBWsDC3o19ufJz8LywoWmukLwWZ6UcEuJbscyyrE8+JbbhE7IdvRrChYeaRKbu66oznl5tYVTHaolKJg9dlMT7D0B4mwYAD5g2AAjiAYgCMIBuBIL8EW0+mL69ar91fTl6+L4vZ0Oj256fPxAPL0Eez2i+tiEVzaZvYq/K9YvOrx0QDjoO8t4vLrjUvY/FXzyu1vXhezs54fDaBPX8Hm5V3g8nxaX8cqwYJcpWT337VvHgEOjTjBykpXxUXz99vTsg52f3VRebYt2PLr3+6qoAEcFBGClReqplrVNGMEyjpYY1Qt34vr5q+hgrb8plVBAzgo7IJt27L6W1DpdNq0Jm5ewZo3B4wKoMcAjRzBqJqtRo4CwQD6CBaa6G9/dxPqYLVRlWBNM33z5jApAUSJEWzeVLzur5q62Hxa1cXKytlmc0bTqNi8CXDIRAg2X1u0o3cZAHZgF+z+at1zPEcwABMRrYjnofdrFjq8ZoyCAjARewULgoVWDQAwEFsHm02nL/6EYAA2oloRw1CNk5v7qynjeAFMxPaD1XUwGjkATDCjGcCRvmMRAeAn6DWaPgzzbbd3sGQAwIo+88FCz9iiPeeLJQMAVvQa7Pt+nxhLBgBs03u6SnkVY8kAgEcYYE0OlgwAeIyegoVhvywZAPAY/QSrRk+xZADAY/QSrJ62wpIBAI8RJ9jy/CyMSGy6t8JdYBH6vVgyAGA3cYLNTm5uT1+t5oPNmj4xlgwAeIQowaqe5dIolgwAsBEtWBhJz5IBADYibxFfLc9PbpbnjIICMBHbyFHWttartgHAEzAfDMCRKME2Vm4DAAPRjRwAYCdyPhjNhwAxRF7BmgmXa88ehkk9wIxmgBX9GjmW5zsuacxoBljRb7Dv9PdbVzBmNANs00uwv91Ut4jMaAZ4hJiHP5ztroMxoxngMXp2NAebmNEM8BhDCMaMZkjAsYnUKaPHIrZvEZnRDCkYo2Czk5tSotvT9YCOVR2MGc2wb0YoWFgxIKw2Ol93IK9aEZnRDPtmlIJdvHdTCCNA40htoRE7ejT9RhULxoHGkdpCI3ZcHSysFTA727hFhBGgcaS20Igd2Uw/e/UwbgNGgsaR2kIjNjOah0Ril7fQOFJbaMRGsCGR2OUtNI7UFvbYKb9gpGBVTzM1sMcY+5GaFfbYA5eMShk5o7keEeU/iHf4L7oXNGObUh+nTtnCHnvgklEpI5vp6yEcM/dr2PBfdC9oxjalPvYqqRc7KmVcR3MztnC1NMfqYejbNK/uftPI8F90LzjENn1k5Gd2/ic8SmYVxlzQTKcr2KofbLZ+DsQmzau73zQy/BeN2Mrdw5hL2sPYS3aO7RHGXrLzbkpWMuqwi6yDTYNh82ntWWtQx+Zo+l0jPhy+6MAfuXPj2X/RIYy9ZOfYHmHsJbukTht718Z+lG6rStUzVlYzv3YuGbAxLQzgYOnTD7ZafWPnkgEIBjCIYI8sGYBgAB06mk9uVguyrVTauWQAggF06Gieh+eD1YY17Ri7lwxgWgtAh/lgoba1esJl3RK/e8mAfs30AOMgekZzEGzV0dw0H+5eMoBpLQDdrmD+Q6UAxkGXOtiqoxkAnqDLdBVWxAYwwoRLAEd4RjOAIzyjGcARntEM4EjPZzQDwE9BIweAIwgG4AiCATiCYACOIBiAI3bBlucXuU2gfHc0+XXqDLHcfTkp+eiH1DlieffZZPKpWuq3k4pnX6WLECPYWW6CXU70BCtPCoqC1Yfqx6ljRCIlWHgm7DSrfrCw+eQEeyt3lAbK6+6nxRu980LgMukW77Sybx78+AtFwd5MnqeO0IF3RymvAr14O/ngzwn/eeFGjjeTfxGsg11OfiZZmfngP4/0YhfVaTjpMRIp2MMKUsl5d/TR/+kJVrdxyN1rNZUZwbvb1Pe1sUtnh/kqWcxovvvy2VeCrYj//Ky81/pe7ta2FCzUwZLebHWiPKGlvSXvNB8sh4egh8YCQcEqytsWsYrY29ASp1gRS56503ywHGatXE4k71re/ry8CqSuF8RTncqSH6wdSH2HqHsFExWsPFKfl7eIakdqeaf18Q+Ct4ghd9oEsnWwgOItYn1iELtDXLVyyMVOXgUTbkUsNAUrvj+aPPtV6hDx/OUTxdjpb8aF+8EA8gfBABxBMABHEAzAkV6CLXY2eNxfVaPtQ3tIBs35ACnpNJq+6Wi+/eJ6V59z82CwBQ8HA+gk2PzBqq0ZLJtPuCxmLLMNECHY7GHC5YM7YVDH+lF7m89ovv8ul94ygHT0m3B5e1rWwcIjZOvBU5uCLb/+bT490gCJ6NuKWNbBGqMW1bXtxXXz11BBW36TflAwQEriBFuen4WlOTYaB4NK6+FTm1ew5s0hswLIESfY7OTm9rRuJGwIgv1mdZ3aauQoEAwgej7YYnqxapsP/7n93U2og9VGVYI1zfTNmw6RAXSIFmxWirNqpp/XC7gtz7eaM5pGxXkuq7sBpCPyFvHV8vzkZnlOHzKAidhGjvJadX+FXwA2GOwL4AiCATgivWQAQO5IL3oDkDuyy7YBKCC78CiAAr2uYKFG1r5bZEYzwIo+dbBq5FS7xYMZzQAr+rQiLsoLVBiIuIYZzbA/jk2kTtm3HyxcxZjRDAk4DMHK6hgzmiEFoxRsVoq02FySI0xKYUYzJGCMgs2qC9XDaPp5uEYxoxlSMELB3u8Hq+eFMaMZUjBCwdb9YA8Lj1avMqNZGo0jtYVG7LhbxLoH7Pa09qxeKPGCGc3iaBypLTRiM5oeNI7UFhqxmQ8GGkdqC43YCAYaR2oLjdgINiQSu7yFxpHaQiM2gg2JxC5voXGkttCIjWBDIrHLW2gcqS00YiPYkEjs8hYaR2oLjdgINiQSu7yFxpHaQiO2XbDl+cMD+NY9yA/DpB444BnNEru8hcaR2kIjdr8r2PJ8x2CNIWY0S2y7NpqxNY7UFhqxewk2n/5+6wo23IxmiW3XRjO2xpHaQiN29Nr0m7eIf7upbhEdZjRLbLs2mrE1jtQWGrGj54OVEt2ertfhCDZ5zGiW2HZtNGNrHKktNGJHzgc7q1a6eVh4NNjkMaNZYtu10YytcaS2sMdO+QWjJ1yulKqp/uYwo1lzl4vGTnn89cAeO+UXjJ5wuTFhuSje0224Gc2au1w0tv34s5ckdkPkhMuXVevg9i2ix4zmnHZkBJqx7cefvSSxG2JXlXr10GYYWLUiDj2jOacdGYFmbPvxZy9J7IZMh0rltCMjkNjl3VITuxtxjRxNncr/6So57cgIJHZ5t9SHEXv479dJsDmC7WbYHXmcU+rDiD3894sQbPYw2Nf9uQ4O224faMa2h/EoqRc7KmWnK5g/DttONPYevqBHmDHHjkqp3sgx8LY7PsTYHmHGHDsqZabrIqbadseHGNsjzJhjR6Xs84RLR1Jtu+MRxU4axl6yS+q0saMOiV7PaPYj1bY77hXGXtIexl4yq21oL9klddrYxmO4ptfTVZrFAd6jeXXHmw5fdOCPPN71te2/6BDGXrJzbI8w9pJdUqeNvWtjP0qvK1izOMB7NK/ueNPhiw78kce7vrb9Fx3C2Et2ju0Rxl6yS+q0sXdt7EfpUwfbHlhfbI+mb73p80UH/sidG8/+iw5h7CU7x/YIYy/ZJXXa2Ls29qP0aUVczfzauWTAxrQwgIOlTz/YavWNnUsGIBjAIII9smQAggFELTz6fu/XSqWdSwYgGEA/wZp2jN1LBuxq5AA4NPoI1rTE714y4JE2fICDopdgTfPh7iUDtpYWADhMej78AQB+il5XMAD4aRAMwBEEA3AEwQAcyXTJAIBxgGAAjiAYgCMIBuAIggE4gmAAjiAYgCMIBuCIrmB3304mz36VOkU0d388mnz4VeoUsbyZPA//+f5o8uzz1Fm00BXschJ4njpGLFXsZ2KGva039Jtqk/86dRopZAV7d1Tu88vJB39OHSSOMvbnd19OPvohdZAIwr1CEOzHX0ye311qZU+OsGDlZeCtnGBVYrHYl5OffRIEE93kaZEVrLwMhCuY2um0EUzqHvHbX/41bOw6e2UZmJEVrHj3WXnj8qHa2bS6RbxUq8jcbQomlj0xuoL95UiwtSAcqoItBQjWGVnBwqWgeKNXIbj7j8mzf1O7zbrjFrErsoIpn07lGgpqwWjk6ICwYNUVTO10+s/PqjrYx6lzxFELFprpBduV0iIrWFOZETtSRTuaa8HoaO6ArGDF3bdHk2efyp1NyzrY5MP/SZ0ikkYwhkrFoysYgAAIBuAIggE4gmAAjvQSbDHdeqxKw/1V9XCI8Fy+6sGyAIdLr0fIfnFdLNoPWmkeDLbg4WAAfW8Rt54Su/mEy2J21vOjAfTpK9i8vAtcP2pv8xnN99/xfGaAfoLdnpZ1sPAI2XlV29oUbPn1b3dV0AAOir5XsLIO1hi1qJ59+eK6+WuooC2/4UmYAhybSJ1SlAHqYKG5sL5YbV7Bmjd7BwR3EMyRIQT7zeo6tdXIUSCYCAjmSB/BQhP97e9uQh2sNqoSrGmmb94cJiV4gmCO9LqCzadV8+HyfKs5o2lUbN6E7EEwRxgqNSSaRyqCOYJgQ6J5pCKYIwg2JJpHKoI5gmBDonmkIpgjCDYkmkcqgjmSqWCiu1wzNoI5gmBDohkbwRxBsCHRjI1gjvQSLIxCvGi9OsSMZtFdrhkbwRzpI9jy/KJYtKekDDGjWXSXa8ZGMEd6jUUsL1BhIOKa4WY0i+5yzdgI5kjv0fTlVcxhRrPoLteMjWCODLBkgMeMZtFdrhkbwRzpKdg8TEpxmNEsuss1YyOYI/0Em4drlMeMZtFdrhkbwRzpNx+sqnp5zGgW3eWasRHMkb4Ljxah32v4Gc2iu1wzNoI50kewWVXruvCY0Sy6yzVjI5gjDJUaEs3YCOYIgg2JZmwEcwTBhkQzNoI5gmBDohkbwRxBsCHRjI1gjiDYkGjGRjBHEGxINGMjmCMINiSase2C2UtCA4INiWZsuzb2ktDQU7CHcYgPsGSA2JFqD5NVbA36CbY83zEaiiUDxI5Ue5isYmvQ8+kqv9+6giVYMiCvXa4Z2x4mq9ga9BLsbzfVLWLKJQPy2uWase1hsoqtwQB1sKRLBuS1yzVj28NkFVuDAQRLumRAXrtcM7Y9TFaxNRhCsJRLBuS1yzVj28NkFVuDga5gNQmWDMhrl2vGtofxKDlyBqqDJVsyIK8d6RB7D1/QI8weYmswREdzyiUD8trlmrE9wuwhtgbqQ6Xy2uWasT3C7CG2Bgg25C7XjO0RZg+xNUCwIXe5ZmyPMHuIrQGCDbnLNWN7hNlDbA0Q7Oldbv9FhzD2klltQ3vJkbNXwQbePw4fedw5dlxJexh7yc6xPcLYS44cBGuX7BQ7rqQ9jL1k59geYewlRw6CtUt2ih1X0h7GXrJzbI8w9pIjp5dgzdzl3a/ueHPg/ePwkce7vqb9Fx3C2Et2ju0Rxl5y5PQSrJm7vPvVHW8OvH8cPvJ419e0/6JDGHvJzrE9wthLjpw+gm0M663ZHOzberNAsC5h7CU7x/YIYy85cno9H6yZmLJzRvPGrJU1A+8fh4883vU97b/oEMZesnNsjzD2kiNnAMF2z2jeJRjAoTGAYI/MaEYwgEEE2zmjeVuwqRaaqcVjj5MBGjl2z2je1cgBcGgM0Ey/e0bzI234AAdFL8Ga5sPdM5rXbYsAh0umo+kBxgGCATiCYACOIBiAI1kItnj5em5byN5c0uEj8wrTOXbaMN23tig5CHZ/dbE8v1gYntZnLunwkXmF6Rw7bZjuW1uVHAQL46xevrb0SptLOnxkXmE6x04bpvvWViUHwcrT2vzkZm47AdpKOnxkXmE6x04bpvvWViUHwYpFGCP8hekW3lrS4SPzCtM5dtow3be2KFkIBjBWRiqYcaJMbvNpiD06chBsed7MW3hy7KK95OzC9C+HR9123evmMPbUe4jtsbH3sbVVyUGwetR9+cfTlV9ryebgePLQmE/NB1H3MPaC+4g9/Mbez9YWJQfB6tPa1syy3iUj//Huv2kI45C6e+ykG/sA7xJzEOz+qjpVntw82QFpL7kHzGE0U0eUhMfJQbByL5a3Da+K29Onb+UtJcO9vvGmpagWSJ1Oux1C5timgvuKPezG3t/W1iQPwRKyPk+nDhIHsUU4eMHWNY3UQeIgtghZCLYw32GYS86tBXucU81h7N9vD7EdNvZetrYoOQi2PDd1o8SUrIdsz84MRTvXCmLC2D/SO7bDxt7L1lYlC8HMbbfmkqHm/Y3zqO2YMPaP9I7tsLH3srVVyUGwZrm3IUveX13cf3ftvMvNsc0F9xF7+I1d7GVri5KDYPZWXnvJ2y/CWt7Ot4jGMBGt2P6xPTb2Pra2KjkIlhTRajexRTh4wUQbjoktQnLB7AMBYoYM2Hdkx3OqOUzUQAfv2D4b239rC5NcMA+q571MjTf7+dQKiD1CRimY7KhtYo+O5IKtp/UNey8Syz8iPzImtmPFIzJ2Jhs7emsLk1ywCOz3IuEmfx5Ggj9FOOIuwif7TQGMuIMi9vhQEsx8LxKm4C7Knfjk88lCnfv2i+uZ4eDogfUOitgjJLlgcdOJTNx/d13Pd7dN2p11+Zc1Yzuk3svWFia5YFHYqgWh1P3VmXWXuy+DaazMEHuMKAlmrRZUj4cOi1s+Ode93uWWIT7dMVdmiD1GshDs/mp68ndLa5WxWtCshLQ8f2pn9tvl1tjWysx+Yg+9sfe1tUXJQbDyBmMx6ILl5TH04rpYPD36NKrZuv2vKMYePHWxn62tSg6ChUdunNxYbuEHr6H3wRZbM3V2sWXJQbD6pCo3QE0ztmZqXXIQrBAdoKYZWzO1LFkIZkNzxJtmatXY+aEmmGlllZzQTK0aOz8yEGweqtGLpx+Mndk+N8bWTJ1bbF3SCzavm6luT03dKJZ9vpfmYGts+5G6j9jDb+zDbHy3k1yw9c2+bSCA9aRarYjkeAY2x467FDjHdtrY7ltbmHwEe7prJo8pWJv/gOHfyGUK1sbnW/6JrGIrk1ywapxoYNBRoO5rP2jG9kldHN5KG3aSC7aqD8yfrnjHUPX2eM470oztk7pw39q6pBesfgyV4O7RjK2ZWpccBAMYLWMVzP7onawg9tgYqWD2R+9kBbFHh5Bg8c30OdChvTsHRGPnh5BgAXOPpv0hPXvA3g9L7LGhJZi5RzOryYL2flhijw4twTR7NDVTF6KxM0NLsEKzR1MzdSEaOy/EBDNjfu59XhB7bIxUsIjn3ucEsUeHmGDWHs28nntv7ocl9ujQEszco5nVc+/t/bDEHh1igpl7NO3Pvfcnoh+W2GNDSzDRHk3N1Kqx80JLMM0eTc3UqrEzQ0swADEQDMARMcE0ezQ1U6vGzgstwTR7NDVTq8bODDHBzD2ai5ev59OBl3bpSkQ/LLHHhpZg5h7NsmB9AvbP9DT2flhijw4twcw9muExcy+zGbxj7ocl9ugQE8xKeU6dD/ug1L1A7NExUsGKRVklKM/AqWPEQuyxMVbBALJgpIKJrnNE7NExUsGKmeZKfcQeGyMVTHSgKrFHh5hg91fTk7/LNQdrpi5EY+eFlmD3V2cLvfZgzdSFaOzM0BIs9Gie3NgGF5T3LJkcG/bUBbHHhpZg9UnVsBZmVotmmlMXxB4dWoIV1lNlXk8NNp/giT06xASzInpOJfbo0BLM3qOZU60goh+W2GNDSzDRHk3N1Kqx80JLMM0eTc3UqrEzQ0swO6I3LcQeGyMVTLTaTezRoSWY+a4lq4Zj+70WsUeHlmA1hsp3hudUS5MBsUeHomBqQ6VqRMccicbOBkXBFpINW5qpVWNng5ZgTbVArH9GM7Vq7MzQEsxGc2So9eEQe4yMUTCAbNASTLM9WDO1auzMUBLs9rS5F3mivSqvRY6sqYk9SpQEs+7MqlRGTwUxHoLEHiNagtkQ3eXEHiNCgoXH6ZhG72S1y82piT1KhAQzI7rLiT1GRimYZs8MsceImGALyT2pmVo1dl5oCbY8Vxy4o5laNXZmiAkm2eeimVo1dmZoCVbMX6VO0AXN1Kqx80JLMM11WDRTq8bODC3BAMTQEkyzWqCZWjV2ZmgJJroWpmZq1dh5oSWYZrVAM7Vq7MzQEgxADAQDcERLMM27Fs3UqrEzQ0uwGs3Kt2Zq1djZoCiY5jIRmqlVY2eDomCaa2FqplaNnQ1agmmuhamZWjV2ZmgJBiAGggE4IiSY5tg4zdSqsfNDTTC51VU0U6vGzg8Ec0YztWrs/EAwZzRTq8bODwRzRjO1auz8UBJMcgE+zdSqsfNDSDAAPRAMwBEEA3AEwQAcQTAARxAMwBEhwTRbjjVTq8bODyHBAtVy6XL9n5qpVWPnhZZg9RhvtVnsmqlVY2eGlmD3V9VJ9eQmdZAoNFMXorEzQ0uw4v6qrBXIPVVHM3UhGjsvxAQD0ALBABwRE6y8azn5u1y1WzN1IRo7L7QEu786W5zczMXq3ZqpC9HYmaEl2PLr63Kfq7Uca6ZWjZ0ZWoLVJ1W1lmPN1IVo7MzQEqyoWo7ldrlm6kI0dl6ICQagBYIBOKIl2PI8DD1dfqNV79ZMrRo7M7QEK25PX/zpSm74jmZq1dh5ISZYUcwkJyhpplaNnRNigs2mJzczuZOqZmrV2HmhJVhdIbj/L63TqmZq1diZoSUYgBgIBuCIkGDLr6+bpViUat6aqVVj54eQYAB6IBiAI0KCaT42WDO1auz8UBNMbpk+zdSqsfMDwZzRTK0aOz8QzBnN1Kqx8wPBnNFMrRo7P5QEk3wegWZq1dj5ISQYgB4IBuAIggE4gmAAjiAYgCMIBuAIggE4gmAAjiAYgCMIBqNgVg07ebExyWZ5flH9v2Lx4nr986M8XWLNwloSwWAU1E+Bmb/Ynsa2KdjTn2EXzF4SwWAU1ILVy30/gGAAg7ASrLktLP9Y/zwvbx3/u75FXJ7/4Xw6DXLM6hfrXy5LTM+Kdenw8+1pKHl2e1oXX5eofj+8anyuE4LBKGhuEV8VLcFmL18Xi+lKsNKpcB+5erH63fDC7elZVXr18+1pKBnmEszD/9cl6t/nCgYHRt3IEa4r7wl2e1pdsFaCVRenhxfDr9b3lYuXr6tfan4OOhXNHxcbJVYvIBgcFPUVbDF99b5gi2pC22IlWP3e+sVi/Z9am/XPlYKrPzZLrD/bBoLBKGieJT2rrkObgs13CTbfEqyZWloJtvp5W7CNEggGh0gj2LwlmPUKVtRvrH7ecQUrtut3NhAMRsHqCnZys1lPWtfB5tuCrV8Mv7O2ZdOcLcE2SyAYHCKrOthFcX91cnN/NV23IgaNHloRa0HarYirZpDVz1uCbZUo1m0hFhAMRsHGUKmwYM8fHusHawQL5V/+72pBn3m9uM+6H6z8eVuwrRKVoPSDATzBYg8rZiEYHCDVVcl+n9cDBINDpGp4N4+d7wGCATiCYACOIBiAIwgG4AiCATiCYACOIBiAIwgG4AiCATiCYACOIBiAIwgG4AiCATiCYACOIBiAIwgG4AiCATiCYACOIBiAIwgG4AiCATiCYACOIBiAIwgG4AiCATiCYACOIBiAIwgG4AiCATiCYACOIBiAIwgG4AiCATiCYACOIBiAIwgG4AiCATjy/wxEfisNWuQXAAAAAElFTkSuQmCC" /><!-- --></p>
</div>
<div id="subsetting-the-blockbuster-list-output-for-specified-years-of-interest" class="section level4">
<h4>Subsetting the blockbuster list output for specified years of interest</h4>
<p>Perhaps we are interested in just the last couple of years of the simulation? We can subset a single year of interest or dataframe from the list using the normal R syntax.</p>
<p>The following graph also highlights a flaw in the earlier generation of the deterioration model which just considered the <code>unit_area</code> of a building component and ignored the building component <code>element</code>, <code>sub_element</code> or <code>const_type</code> type in its calculations. The blockbuster model considers this when estimating repair costs. In the figure below we aggregate across building <code>element</code> the total <code>unit_area</code> and <code>cost</code> of repairs and plot using the extra dimensions afforded by point area and colour. In short this identifies an interaction term between <code>element</code> and <code>grade</code> for <code>cost</code> of repairs (the trajectory of gradient is different between building components as you go between condition grades).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p6 &lt;-<span class="st"> </span>my_block_10years[<span class="dv">11</span>] %&gt;%
<span class="st">  </span>purrr::<span class="kw">map_df</span>(
    ~<span class="st"> </span>.x ,
    <span class="dt">.id =</span> <span class="ot">NULL</span>
  ) %&gt;%
<span class="st">  </span>dplyr::<span class="kw">group_by</span>(timestep, grade, <span class="dt">element_shrt =</span> <span class="kw">as.factor</span>(<span class="kw">abbreviate</span>(element, <span class="dv">14</span>))) %&gt;%
<span class="st">  </span>dplyr::<span class="kw">summarise</span>(<span class="dt">sum_unit_area =</span> <span class="kw">sum</span>(unit_area, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
                   <span class="dt">sum_cost =</span> <span class="kw">sum</span>(cost, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) %&gt;%
<span class="st">  </span>ggplot2::<span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> grade, <span class="dt">y =</span> sum_cost, <span class="dt">colour =</span> element_shrt, <span class="dt">size =</span> sum_unit_area)) +
<span class="st">  </span>ggplot2::<span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="fl">0.7</span>) +
<span class="st">  </span>ggplot2::<span class="kw">facet_wrap</span>(
    ~<span class="st"> </span>timestep
  )

p6 +<span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;Cost of repairs (£)&quot;</span>) +<span class="st"> </span><span class="kw">xlab</span>(<span class="st">&quot;Condition grade&quot;</span>)  +
<span class="st">  </span><span class="kw">theme_economist</span>() +<span class="st"> </span>
<span class="st">  </span><span class="kw">scale_size_continuous</span>(<span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">1000</span>, <span class="dv">2000</span>, <span class="dv">3000</span>), <span class="dt">range =</span> <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">10</span>))</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
</div>
</div>
<div id="rebuilding" class="section level2">
<h2>Rebuilding</h2>
<p>Rebuilding is carried out by the <code>rebuild</code> function which is internal to <code>blockbuster</code>. The rebuilding of the <code>blockbuster_tibble</code> you pass as an argument is dependent on two other arguments; the <code>rebuild_monies</code> and <code>rebuild_cost_rate</code>. Both can be passed as a vector equal in length to the number of years you are simulating (<code>forecast_horizon</code>) or as a number. This allows you to control for inflation in the construction industry and variable rebuilding spending from year to year. Technically the <code>blockbuster</code> function makes use of the <code>rebuild_cost_rate</code> in estimating how much it would cost to rebuild a block (<code>rebuild_cost_rate</code> multiplied by block <code>gifa</code>), this is then passed into <code>rebuild</code> for a decision on how to spend the available <code>rebuild_monies</code>. All the blocks (unique based on <code>buildingid</code>) in the <code>blockbuster_tibble</code> are ranked in descending order of the ratio of the total cost of repairs to the cost of rebuilding the block (where a score higher than one means the block is more expensive to repair than it is to rebuild). The block with the highest internal statistic of <code>cost_to_rebuild_ratio</code> is inspected for rebuilding first. If enough monies are available it is rebuilt by converting all its building components back to new and recalculating the <code>unit_area</code> (using <code>areafy2</code>). The leftover money is then cycled through the list rebuilding as appropriate until the remaining money is less than the cheapest block to rebuild, at which point it is discarded (NOT passed to <code>repair_monies</code>).</p>
<div id="example" class="section level3">
<h3>Example</h3>
<p>We inspect the effect of rebuilding on the cost of repairs of three buildings with a non-constant rebuilding investment profile and <code>rebuild_cost_rate</code> adjusted for 0% (year 2) then 1% inflation (year 3) (you can pass this as a vector rather than typing it manually of course). We inspect the effect of the rebuild on total repair costs using a faceted stacked bar chart for the different building elements in all the blocks (try increasing the <code>rebuild_monies</code> by one pound, what happens?).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#  We filter our PDS sample for just three blocks to keep things simple</span>
x &lt;-<span class="st"> </span>dplyr::<span class="kw">filter</span>(blockbuster::blockbuster_pds,  buildingid ==<span class="st"> </span><span class="dv">4382</span> |<span class="st"> </span>buildingid ==<span class="st"> </span><span class="dv">4472</span>
                   |<span class="st"> </span>buildingid ==<span class="st"> </span><span class="dv">4487</span>)
<span class="co">#  Rebuild spending profile</span>
y &lt;-<span class="st"> </span><span class="kw">blockbuster</span>(x, <span class="dt">forecast_horizon =</span> <span class="dv">8</span>, <span class="dt">rebuild_monies =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="fl">5e6</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>),  <span class="co">#  five million</span>
                 <span class="dt">rebuild_cost_rate =</span> <span class="kw">c</span>(<span class="dv">1274</span>, <span class="dv">1274</span> +<span class="st"> </span><span class="dv">0</span>, <span class="dv">1274</span> +<span class="st"> </span><span class="fl">12.74</span>, <span class="fl">1286.74</span>, <span class="fl">1286.74</span>,
                                       <span class="fl">1286.74</span>, <span class="fl">1286.74</span>, <span class="fl">1286.74</span>))  <span class="co">#  £/m^2</span>

p7 &lt;-<span class="st"> </span>y %&gt;%
<span class="st">  </span>purrr::<span class="kw">map_df</span>(
    ~<span class="st"> </span>.x ,
    <span class="dt">.id =</span> <span class="ot">NULL</span>
  ) %&gt;%
<span class="st">  </span>dplyr::<span class="kw">group_by</span>(timestep, element, grade) %&gt;%
<span class="st">  </span>dplyr::<span class="kw">summarise</span>(<span class="dt">sum_cost =</span> <span class="kw">sum</span>(cost, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) %&gt;%
<span class="st">  </span>ggplot2::<span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> element, <span class="dt">y =</span> sum_cost, <span class="dt">fill =</span> grade)) +
<span class="st">  </span>ggplot2::<span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) +
<span class="st">  </span>ggplot2::<span class="kw">facet_wrap</span>(
    ~timestep
  ) +<span class="st"> </span><span class="kw">scale_fill_discrete</span>(<span class="dt">drop =</span> <span class="ot">FALSE</span>) +<span class="st"> </span><span class="kw">scale_x_discrete</span>(<span class="dt">drop =</span> <span class="ot">FALSE</span>)  <span class="co">#  gives E a colour</span>

p7 +<span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;Total cost of repairs (£)&quot;</span>) +<span class="st"> </span><span class="kw">xlab</span>(<span class="st">&quot;Building element&quot;</span>) +
<span class="st">  </span>govstyle::<span class="kw">theme_gov</span>() +<span class="st"> </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">90</span>, <span class="dt">hjust =</span> <span class="dv">1</span>)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">plot.margin =</span> <span class="kw">unit</span>(<span class="kw">c</span>(<span class="dv">20</span>,<span class="dv">10</span>,<span class="dv">10</span>,<span class="dv">10</span>),<span class="st">&quot;mm&quot;</span>)) +
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;top&quot;</span>) </code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA8AAAASACAMAAAAH99RLAAABBVBMVEUAAAAAADoAAGYAOjoAOmYAOpAAZrYAujgAv8Q6AAA6OgA6Ojo6ZmY6ZpA6ZrY6kNthnP9mAABmOgBmZmZmZoFmZp1mgYFmgbZmkLZmkNtmnc9mtttmtv+BZmaBZoGBZp2Bnc+BtueQOgCQZgCQkGaQ2/+dZmadZoGdZp2dgbadnZ2dtradz8+dz/+2ZgC2Zjq2gWa2gYG2gZ22kDq2toG2tp225+e25/+2//+3nwDPnWbPtoHPz53P57bP/+fP///bkDrbkGbbtmbb25Db/9vb///ntoHn57bn///y8vL1ZOP4dm3/tmb/z53/z8//25D/27b/57b//7b//8///9v//+f///9Ji+hCAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAgAElEQVR4nO3dD3/jyH3fcZ0T/1m39dmmZDWytRu5tdZuozv5WlsuHVfntGaU9JgLzSWe/0MpAFKUyJkRMRgAM9+Zz/t1ts40F8T+xA//ACB4VgGQdRZ7BQD0R8CAMAIGhBEwIIyAAWEEDAgjYEAYAQPCCBgQRsCAMAIGhBEwIIyAAWEEDAgjYEAYAQPCCBgQRsCAMAIGhBEwIIyAAWEEDAgjYEAYAQPCCBgQRsCAMAIGhBEwIIyAAWEEDAgjYEAYAQPCCBgQRsCAMAIGhBEwIIyAAWEEDAgjYEAYAQPCCBgQRsCAMAIGhBEwIIyAAWEEDAgjYEAYAQPCCBgQRsCAMAIGhBEwIIyAAWEEDAgjYEAYAQPCCBgQRsCAMAIGhBEwIIyAAWEEDAgjYEAYAQPCCBgQRsCAMAIGhBEwIIyAAWEEDAgjYEAYAQPCCBgQRsCAMAIGhBEwIIyAAWEEDAgjYEAYAQPCCBgQRsCAMAIGhBEwIIyAAWEEDAgjYEAYAQPCCBgQRsCAMAIGhBEwIIyAM/f/bP7l+FrftzGu9WMb41qYEgFnjoDzRsCZI+C8EXDmCDhvBJw5As4bAWeOgPNGwJkj4LwRcOacAa+ub5r//vDYXMsZ8Op6Vjt/aJflDHh7rZtof8mCEXDm3gj44rFDwO3/v7xor+UOuLnW+paCp0fAmXMH/OF/3nQNeP2xfQp+O+DnzDElAs7cGwH/768euz4DX7XLOhHwLnNMiYAz90bAj3WX3d4D797engh4c38X7a9ZLALO3FsBb3770O0ZePW+y0toAo6AgDP3VsDV6u87vge+bdPkJXR6CDhzbwZczf87G7G0EXDm3g54uy/pZMCLy6fmWm8HzG6kGAg4c28HXC1OBdxuxNo9tboDbq/FO+AICDhzzoAPOAM+4AwY0RBwVpbnx9uRCDhvBJwVAi4NAWeFgEtDwHrms9n5784f1h9/12xdmj9vPlpsL27/5eWTQf9idbzIIa+FKRGwnHld7XJWB3zb7NyZX9XFNtk+X9z+r+1nBZE/Alazum6eb+dNwDe7Qyyaiw4vfjmo4n/ZGM+aP7AxrvWvNjwDR0XAarZpLptSdztel81r6P3F27fB254rAs4dAatZHAZcv+G9+FNd6/7i5WyLgItAwGoOn4HbZ9rmv46egfcIOG8ErGb74nixC7jtdjm7O7r4BQHnjYDlvGyF3j35rm+bvUbNxuf9Vuhma9b22gScNwLWM6/f9v7jxeP+PfD5w3y3+/dlP/D+k30EnDcC1tT5s7dvBfzydvmNgJtPGm1PieUOeHfiHT4PPD0CVtO+2e3+2ds3At7c/7ddmW8E3DxSbO6313MH/IF0IyFgOUuvz96+EfDqw5+ew3MGvH2dvjsnFgGnh4Az90bAi6tqvnsidwZ88FKdgNNDwJlzB9wchbncnivnjYB3V2ideg98Zbl9jIuAM+cOuGnzeadxaMA8A8dCwJlzBry5f/WsyUtoVQScOWfAB6dsP7ERa/dETcDpIeDMOQOeb597t5uxnAG3x3Vt7rcvpAk4PQScOVfAz1+jsH2N7A643WvV8UAOTiw7PQLOnHsj1mtvBPyKM2BEQ8CZI+C8EXDmCDhvBJw5As4bAWeO08rmjYABYQQMCCNgQBgBA8IIGBBGwIAwAgaEETAgjIABYQQMCCNgQBgBA8IIGBBGwIAwAgaEETAgjIABYQQMCCNgQBgBA8IIGBBGwIAwAgaEETAgjIABYQQMCCsm4D+/O/vs57FXIjlfn30eexXS8ul/1PeTH/0l9mp0V0rAX581fhF7NRLzzRkBH/qivZ98L/ZqdFdIwH/9ydnnn744+67QQ+v4Pn15RsCHvn139vP6wf6zX8Vekc4KCfjbd/Xv5Juz7/wh9oqk5Iuzv/khAR/45of1XaSuWOelWiEBt+22FWPvy//8f39JwKZveAZOzi5goUfWSXwiYFP9dov3wKkhYCsCNv31p0pPwIUFrPSbmQIBG8T6LSVgNmJZEfCxeiJS/ZYScLMbqWI30jECPvaF2sEChQTMgRxWBHzk23dnYneUUgLmUEobAj6yfZwnYACTIGBAGAEDwggYEEbAgDACBoQRMCCMgAFhfgEvZ1t3I60NAC8eAa9vZ1fbf9vczy4ex1kfAB66B7z+9aPzfwGIgvfAgDACBoT5BLzYvfHd3F+NszIA/HgEvDh/2P3bkk1YQBK6B7y5v3n+1wUBA0nw2Ap92+z9nV8+1f/FS2ggCb7PwE3Am3sO5ACS4PseeD6bnf+egIE0eG2Fbo6ivHza3M9uTl8ZwPh89wNv3wOzEQtIAgdyAMI4FhoQxqeRAGF8HhgQxntgQBgBA8IIGBBGwIAwAgaEETAgzC/g9e1Nc0R0czglgPj8Ap5fPq2ur/g8MJAIr4Cbz/QvZ3ecUgdIhHfAzSeROKUOkAbPl9BX69vLp/UtL6GBJPhuxJqdP3BWWSAV7EYChHkF/OrMsgAS4L0R67XN/aw5Pdbu48HWHwBG5Pl54MMmm93C7x+a3cLNnmHrDwAj8nwG3n2gf9vx+uPD84/Vh0frjzFWGWn5sUXsdSpHyEasXaDNj7pX64+B1hIJI+CYQgJeXv6xObsOAZeNgGMKCnh2Uy3P7eUScDEIOCafLze7OXoPvNx+TxIBl42AYwp9D1wHzEasshFwTEFHYs1v2h1L7EYqGgHH5H0s9KuX0O2BHHftpc0F1h/IHgHH5P2B/sVVtbrmxO7YI+CYPA/kuGm3XC04pw72CDgm72Ohmy1TbJ3CCwKOyfvTSGxexiECjsnvPXBzLp35DS+h8QoBx+S5G2l+xeZlHCLgmDgjBwIRcEwEjEAEHJNnwO2RHLwDxisEHJPnGTnOm48nLM75kAL2CDgmz91I20Ow5jwHY4+AY/I7kGP3+UC+WgUvCDimXs/A7AfGCwKOyfM9cPPho2ox48MM2CPgmPqdlfLlE4UoHgHHxH5gBCLgmAgYgQg4Jv8DOS6f5nxDEl4QcEzeB3Ismu8HpmDsEXBM3p8HbnYhLdiChT0Cjsn7jBxNwBzIgRcEHFOvZ2AOpcQLAo6pz3tgDuTAKwQcU5+PE/JhJLxCwDGxHxiBCDgm7/fAwCECjsl7KzRwiIBj8tyIxf4jHCPgmPp9GomOsUfAMbERC4EIOCYCztAPLMa7NQKOiYAzRMDlIOAMEXA5CDhDBFyO7gGvb++eTyuLtBFwOXwCviFgDQRcDo+X0AtOSSmCgMvR65sZkDYCLgcbsTJEwOXwDHh1zeeB00fA5fD9apXm84SckSNxBFyOXp8H5svN0kbA5ej1eWA+VZg2Ai4Hz8AZIuByBL4HXn14bLpudwxbfyACAi5H4FboeRPp/Kr5x/4DERBwOcL2Ay9/Vj8DN4d31M/E1h8DrSW8EHA5ggLefPWnutHVNmLrj6FWEz4IuBxBAS9uVgScIAIuR0jA6988EXCKCLgcIQHP7yoCThEBl6PXp5G2B3LsTjJ7x0as1BBwOXoF/PIF322j7EZKDAGXwyPg+csH+vdfkdQGXD8VX7h+IAICLgcf6M8QAZeDD/RniIDL4Rfw+vamOTUWn2VIGwGXwy/g+eXT6pqtU6kj4HJ4fx54Obvj88CJI+ByeAfcfP5oQcBJI+ByeL6EvlrfXj6tb3kJnTQCLofvRqzZ+cPmnn7TRsDlYDdShgi4HAScIQIuByd2zxABl4MTu2eIgMvBaWUzRMDl4MTuGSLgcvAMnCECLgfvgTNEwOVgK3SGCLgc7AfOEAGXg4AzRMDl8Ax4fvm0eyOMdBFwObw/0F81e5P4NEPSvm8x3q0RcEzsB84QAZej335gAk4aAZfD7yX0dg/w6po3wYmwv9sl4HKwH1gaAZdOfjfStHfW1BBw6QhYGgGXjoClEXDpCFgaAZeOgKURcOkIWBoBl46ApRFw6boHvL59+YLvKEdi2e+WBEzAJRN6BiZgEwGXjoClEXDpvL8biZfQKRkrYPty7Qg4Ju/PAy+uqtV1lJPaEbBprJkQsArPzwPfVMvLp0inlSVgEwGXzvsD/asPj+1/pkfAJgIunfcH+tcfHwg4GQRcOs8P9F88VvMbXkIng4BL53tWyqtmS3ScM+oQsImAS8d+YGkEXDq/jVgftyfTiXNWSgI2EXDpegX8fFbK5gxZd822rfZFtfXHgAjYlELAPtfF0DwCnr98mGF7Vspmr9Ly/KF5Y1z/Y/8xoFIC9gmCgEvX6xl4pzmmY3N/t9uxZP0x5KoSsCndgHlhPY3QjVj1s3DTad2r9ccg67hDwCYCLl3oeaEXl08EPKw8AvZZAvrzC3j7xYTb72doNZuzCHhYBIzu+n030vORWIvmyZiAh0XA6C7o2wm3u5PYiDUsAkZ3Ic/Aq/fbZ1h2Iw2KgNFdyHvg7Y7hu+ejo60/BkTAJgIundC3ExKwiYBLx4cZvExxtyRgdEfAXgi463UJeBo+J3aPciq7FwRsIuDSEbAXAu56XQKeBgF7IeCu1yXgaRCwl1IC9lmCfX2n/b2Uiy8380LAXdeXgKfBM/AAd9Zhs/ZZn3RnEr4O6IKACThwHQg4JgJO7s7qs7RSZgIXAk7uzuqztFJmAheOxEruzuqztFJmAhcCTu7O6rO0UmYCFwJO7s7qs7RSZgIXAk7uzuqztFJmAhcCTu7O6rO0UmYCFwKOeGcNX5rPTOy3ltpM4IeACTipmcAPARNwUjOBHwIm4KRmAj8ETMBJzQR+CJiAk5oJ/BBwxDtr+N/IZwkEnKPJAp72zhq+ZnYEPPZM4IeACw84/G9EwDERMAETsDACJmACFkbABEzAwgiYgAlYGAFHXIdpZ0LAOSLgYgK2X0rA2gi48IDD14GAY8o04PDljvW3SG0m4evgE7D9uuivqICnXYdSZkLAMREwAQeuAwHHRMAEPOE6EPDQCDji+/AU1ieFdUB/BEzA0dcB/REwAUdfB/RHwAQcfR3QHwETcPR1QH8ETMDR1wH9ETABR18H9EfABBx9HdDfaAFv7mcXj6/+dwp3lBTWoe/SSpkJ/IwW8Pyq+edFCneUFNah79JKmQn8jBXw+uNDtfrw6ik4hTtKCuvQd2mlzAR+xgq4ibeJGMCICBgQRsCAMAIGhE22EQvA8CbbjQRgeKMFvL49PJADwPCEvh8YwDECBoQRMCCMgAFhBAwII2BAGAEDwggYEEbAgDACBoQRMCCMgAFhBAwII2BAGAEDwggYEEbAgDACBoQRMCCslIA/fXl29tnPY69Fcr59d/aL2OuQlE+/PKt99y+x16OzUgL+ovm9cGc99gUzOVQ/ohFwgv79J2eff/ovZ9+LvR6J+YYHtSPfqN1HCgm4Ub86EvvljO2vPyHgI1+ffR57FfyUE3D94ug/6bwymsTXZ/+R98CHvjj7m7OzHwndT4oK+G9/FXslkvLtu+/+HwI+sN2GxXvgNH199p0/xF6HhHz65We/Yiv0oX//6We/qv6s9L6ipIC/ffcZT8Evmu01BGzx158IvREuJOBv/kP95EvAB7Z71s7YsvdKez+pA9Z5VCsk4PqZ5vPqS15Cv0bApvZ+8uczoQf6QgLe3Vt1XhlNhJfQR+TuJ6UEXP35HYdSmgj4WHM/+bvYK+GhmICBHBEwIIyAAWEEDAgjYEAYAQPCCBgQRsCAMAIGhBEwIIyAAWEEDAgjYEAYAQPCCBgQRsCAMAIGhBEwIIyAAWEEDAgjYEAYAQPCCBgQRsCAMAIGhBEwIIyAAWEEDAgjYEAYAQPCCBgQRsCAMAIGhBEwIIyAAWEEDAgjYEAYAQPCCBgQFhTw5n42u2l/XDw6fgAYUVDA88un1fuHan7V/GP/AWBEIQGvPz48/1h9eLT+GGgtAViFBLwLtPlR92r9MdBaArAKCXh5+cfZ7I6AgWiCAp7dVMtze7kEDEwg7Bn4qdrc3xEwEEvoe+A6YDZiAbGE7UaqX0JfPLIbCYgl+ECOu6pa37bHbFh/ABgRh1ICwggYEEbAgDACBoQRMCCMgAFhBAwII2BAGAEDwggYEEbAgDACBoQRMCCMgAFhBAwII2BAGAEDwggYEEbAgDACBoQRMCCMgAFhBAwII2BAGAEDwggYEEbAgDACBoQRMCCMgAFhBAwII2BAGAEDwggYEEbAgDACBoQRMCCMgAFhBAwII2BAGAEDwggYEEbAgDACBoQFBrz68FhVm/vZhesHgBEFBjxvIp1fNf/YfwAYUVjAy5/Vz8Drjw/NM7H1x0BrCcAqKODNV3+qG11tI7b+GGo1AdgEBby4WREwEFFIwOvfPBEwEFNIwPO7ioCBmAICXt/OGndsxAJiGWI/MLuRgEiGCLh+Kr5w/QAwIg6lBIQRMCCMgAFhBAwII2BAGAEDwggYEEbAgDACBoQRMCCMgAFhBAwII2BAGAEDwggYEEbAgDACBoQRMCCMgAFhBAwII2BAGAEDwggYEEbAgDACBoQRMCCMgAFhBAwII2BAGAEDwggYEEbAgDACBoQRMCCMgAFhBAwII2BAGAEDwggYEEbAgDACBoQRMCCMgAFhBAwICwp4dT2b3VXV5n528ej4AWBEIQGvb++q5flDNb9q/rH/ADCikICXl0/1E+3d+uNDtfrwaP0x2HoCsAh9D1w/Czed1r1afwyyjgAcQgNeXD4RMBBLYMCLi8eKgIFYwgJenNeJEjAQS1DAi3ZHERuxgFhCAl693z7DshsJiCQk4PmscVetb9tjNqw/AIyIQykBYQQMCCNgQBgBA8IIGBBGwIAwAgaEETAgjIABYQQMCCNgQBgBA8IIGBBGwIAwAgaEETAgjIABYQQMCCNgQBgBQ8APLGKvUxoIGAII2IWAIYCAXQgYAgjYhYAhIDzgXB8CCBgCCNiFgCGAgF0IGAII2IWAIeD7Fn5LIGAgmvCAw5eQJgKGAAJ2IWAIIGAXAoYAAnYhYAiQC3iyTWYEDAEE7ELAEJBCwF47oggYeEHALgQMAQTsQsAQkELAXksg4HKF39XyQ8AuBJycFO6sqRlrJj4viwkYnRCwSS7gyX4DBJwcAjaNNROf5RIwOiFgEwG7EHByUgh4tDt2T2P9jUb7e9qvO8I7YwJOzlh31rGWEH5rw66PzxJG+3varzvCpEYLeHM/u3gca+FZU7uzhq9v37+Rz3WnnUkGAc+vmn/gz+uO4rGEse6s4bc2xbqPdWn3lXBeGmSsgNcfH6rVB56C3xR+Rwm/A067DqXMxCtgn+Uaxgq4ibeJGMCICBgQRsCAMAIGhLERCxDGbiRA2GgBr285kAMYG4dSAsIIGBBGwIAwAgaEETAgjIABYQQMCCNgQBgBA8IIGBBGwIAwAgaEETAgjIABYQQMCCNgQBgBA8IIGBBGwICwYgL+9qdnZz/6S+y1SMk3Z63PfhV7RVLy6ct6In8Xey08lBLw9t76vdirkRICtviincnnsVeju0IC/vTLsx9VX599l6fgI1/woPbat+/qeL84+84fYq9IZ4UE/O07nmhsvlG6r06gvZ9IDaWQgOvfyX99x3vgY3/9ydkvYq9DUupXas0zsNArtWIC5j2wBW8qjjXbOs/+VucJuKCAm/fAQi+NptA+3+C1f3ontl2vmIDrXwpvhI8wkGPfvjv7udYDfSEB17+YX3B/PcYr6GPt9qv2zqKikIDrF4vf+4vUI+sEmqHEXofE1G+1mmdgoQf6QgLebcXiHd9rvAU21CMR29hZSsDVP/1Q6xC5CbATyfTpy3dnnyntbiwmYCBHBAwII2BAGAEDwggYEEbAgDACBoQRMCCMgAFhBAwII2BAGAEDwggYEEbAgDACBoQRMCCMgIHh/atpnBsiYGB4BAwII2BAGAEDwggYEEbAgDACBoQRMCCMgAFhBAwII2BAGAEDwggYEEbAgDACBoQRMCCMgAFhBAwII2BAGAEDwggYEKYR8OZ+Nrtpf1w8On4AJdIIeH75tHr/UM2vmn/sP4ASSQS8/vjw/GP14dH6Y6C1BLRIBLwLtPlR92r9MdBaAlokAl5e/nE2uyNg4JhGwLObanluL5eAUTKNgC+fqs39HQEDRyQCbiKtA2YjFnBEIuBqXr+EvnhkNxJwRCPg5kCOu6pa37bHbFh/ACXSCBiYhqWHkYIYCAEDLwjYhYAhgIBdCBgCCNiFgCGAgF0IGAII2IWAIYCAXQgYAgjYhYAhgIBdCBgCCNiFgCGAgF0IGAII2IWAIYCAXQgYAgjYhYAhgIBdCBgCfmwRe53eRMDACwJ2IWAIIGAXAoYAAnYhYAggYBcChgACdiFgCCBgFwKGAAJ2IWAIIGAXAoYAAnYhYAggYBcChgACdiFgCCBgFwKGAAJ2IWAIIGAXAoYAAnYhYAggYBcChgACdiFgCCBgFwKGAAJ2IWAIIGAXAoYAAnYhYAgID9hS1JgnpiVg4AUBuxAwBBCwCwFDAAG7EDAEELALAUMAAbsQMAQQsAsBI9AUaRCwS2DAqw+PVbW5n124fiB7GgGHL8GLSsDzJtL5VfOP/QeyR8AWIgEvf1Y/A68/PjTPxNYfA60lEkbAFhoBb776U93oahux9cdQq4l0EbCFRsCLmxUBF4+ALSQCXv/miYBBwBYSAc/vKgIGAXe7uXFuKCDg9e2sccdGrLIRcLebG+eGhtgPzG6kok0R8A8s/JZAwFZtwPVT8YXrB7JHwN1ubpwb4lDK5EwRxJAIuNvNjXNDBJwcAjYRsAsBJ4eATQTsQsDJIWATAbsQcHImvqsFI+BuNzfODRFwcgjYRMAuBJwcAjYRsAsBJ4eATQTsQsDJIWATAbsQcHII2ETALgScHAI2EbALASeHgE0E7ELAySFgEwG7EHByCNhEwC4EnBwCNhGwCwEnRy3gKdY3PODwJXgh4HIRsImAXQg4OQRsImAXAk4OAZsI2IWAk0PAJgJ2IeDkELCJgF0IODkEbCJgFwJOTvhdbYo9sy8I2IKAyxV+V5v2OZyALQi4XARsImAXAk4OAZsI2IWAk0PAJgJ2IeDkELCJgF0IODkEbCJgFwJODgGbCNiFgJNDwCYCdiHg5BCwiYBdCDg5BGwiYBcCTg4BmwjYhYCTQ8CmFAL2OsKcgMuVwp3VBwFbEHC5Uriz+iBgCwIuVwp3Vh8EbEHA5UrhzuqjlIC9/p4EXK4U7qw+CLjblf1urSsCTk4Kd1YfBNztyn631hUBJyeFO6sPAu52Zb9b64qAk5PCndUHAXe7st+tdRU54Cl++WpSuLP6IOBuV/a7ta6CAl5dz2Z3VbW5n108On6cQMCmFO6sPgi425X9bq2rkIDXt3fV8vyhml81/9h/nEDAphTurD4IuNuV/W6tq5CAl5dP9RPt3frjQ7X68Gj9cWoRBGxK4c7qg4C7Xdnv1roKfQ9cPws3nda9Wn+c+uMEbErhzuqDgLtd2e/WugoNeHH5FBLwtHc1DSncWX0QcLcr+91aV4EBLy4eKwIeVgp3Vh8E3O3KfrfWVVjAi/M60ZICLuXO6qOUmWQY8KLdURSyEYuATSncWX0oz8TnE0b5Bbx6v32GDdiNRMAmAjYRsEtIwPNZ465a37bHbFh/nBD+i5ni7jPtrRGwKYWAvdZBIuABELCJgE0E7ELAyd0aAZsI2IWAk7s1AjZ938JvCQQ8Cu6sphRmMtrGnZ7CA7YvgYADpXBn9VFKwD5/T+WAfdadgC1SuLP6IOCw6/ZFwC4E7IWAw67bFwG7ELAXAg67bl8E7ELAXjTurATcdQkEHIiATWPdWX0QsImALQjYRMAmAnYhYC/Kd1YfPlNVngkBByJgEwGbCNiFgL0o31l9ELCJgC0I2ETAJgJ2IWAvyndWHz5TneI3IBfwZPfKyAFPe1cLpxzwWAfuE3C3K/utb1fyAYcvwQcBh123LwJ2IWAvygGPdWdVDni0vycBT7cEHwQcdt2+CNiFgL0QcNh1+yJgFwIe731QTwTc9W8UvgQCDkTAJgLu+jcKXwIBB0oh4FLurAQcFrDXOhDwdEso5c5KwAQ8OAI2pXBnZSaB60DA0y2BO2vYOjATCwKebgkEHLYOzMTCvlyPY+G6ImACDlwHZmJhX67HVoiuCJiAA9eBmVgQcNgS2OI63Z2VmVgQcNgSfALmzhq2Dsoz8Vmu1zrYZzLCpDINmDsrM+myBJ/leq0DAYctgTtr7Jn4fPq4798ofAk+y/VaBwIOWwIBT3dntc/E501M37+Rnf2Wp50JAQcugYCnu7PaZzLspMLXZ9qZEHDgEgh4ujtrfgHbX/57/V7sf3ufJXSUacA+y/W5LgGb8gvY50V495Ww/zX6z2SLgMd7GdWTz22k8H7Pfl0CJuCAJfgsN/y6ynfWsWbis4RhZ+KzPvZLfabafSWclwYhYAIeZSY+S3gt/NnPZ33slxJwZ15D8ViCz3LDrxv+t5hifeyXht9Zh53JtOsz1kwI2IJnm7D1sV9KwGPMxCvgoENehAIO/8VMuw6n5XFnHXYm4UvzWUL4pd1Xwnmp9TfQ1WgBb+5nF4+v/jd31jGW5rOE8EvD18H+G8hvJhkEPL9q/nkRPpTwYU+7DqcPJpx2fcIvHWsd8puJV8A+yzWMFfD640O1+vDqKTh8KD5LCL90rHXouzRmMt36hK+DfsBNvE3Ee+FD8VlC+KVjrUPfpTGT6dYnfB0yDBjA8AgYEEbAgLDJNmIBGN5ku5EADG+0gNe3hwdyABhe5EMpAYQgYEAYAQPCpgl4hj1mYsFMTN3S4hkYEEbAgDACBoQRMCCMgAFhBAwII2BAWKyAlxePi9n58ccNy7s0tfVJ4dLU1ieFS50iBby5v1vf3i0vnwq/NLX1SeHS1NYnhUvdIgW8/vhQP9Icf2C4vEtTW58ULk1tfVK41C3eM/Di8mlhPvoUdmlq65PCpamtTwqXukV7D1y/zF+9N17/F3dpauuTwqWprU8KlzqxFRoQJhuwzxnz7Ncd5Zx7UU/kx0zCblxxJokXqr0AABSCSURBVLE2Yt3uPjN1eNqdzf3s8p+N9+8LyzWran7XfbnW6zouNddhv1BjHZbGpfUvxvG7sf/dTq87M2Emb4j1DNye8K7+r4N365v7m6X5Bn67VX1+Ux1dav912ZZrv679Uvs6VIt2ucY6mL/aheOX6FjuyXVnJszkLfF2I1XtyaMPtpc3m9Avnywb1te/7rhh3b5czzWzr8N2uZZL7evQbbnW22Am5m0wE4dou5HaR6rLp6X5yDo3N6xvfvvQ7a9kX67fmtnXYbfcwysvup84175c620wE/M2mIlDtI1Y8/rVw1W1uj54cVG//p/NjHVfvX+o30QcvSxxXNdcbvPAbH8ZZV/CG5ce/xoGWO7b6+7+c8yk4Jm8JrsV2vFYN+kSpl3uFLfMTMZYwpjLlQ3Y/m5j2iVMu9wpbpmZjLGEMZcb70gs24uK5giUhfGFDtYN647HL/tyrTsYHEsw18G9e8D6cqfzco8xExMzOSHafmDbvrXNfXOpeXSodcO6dSj25dp3MLjGalsHO8evoOdymYl1La23UfJMDkXdjWS/1Pb5jK4b1p3L9d/BMPl1mYnrGt3+XCkzORTrJbR9w/rc9kjltWHdulyfHQz2dfB6eeaz3NeYiYmZnBD3UMrgDfbmSyPXe6bOOxgcL2y6vzzru3uAmZiYySmyW6Gn3T3g8/KslF0mzMQ0/UwEAvZ5H+S/3K7D7v7ybIpdJszEdRvD33LaM4kRsP2YF/eRMNZPg1gev5xLsI/KZwmWFzbO63ot9+1rMBNmcoLCM7DP+yCL1fVu71y3dybhxlruK8zEVOZMBAIOF/UT5YliJibFmUR5Ce08YsVt2e26o7zX8nzJtfNvXuvATCy3wUxOS+oZeH3reEExN7btty8/jl9/OF4ENW8zFsZnRKxLeGMdDPZba36Fd83/aXwsvN+LJWZiYiYvkgp4+5e17YYzz1HSbrBYzI62W9heBDV75Zb1AuYHvxnXEuzrYGe5tWbLxOr9w9z4SJnPck//OWbCTLbS2Qq9d3gkd/3XuXxa//p4A95unB0+j7357cP28JaDlzAnlrA42u556kYOrzt3vo5zHqXOTKx/jpmckvoz8HYox7+Y/ag6nNKkuWhzf2O51LoE1zoYh7g3zE+vtNe1H4o+2LMNM2Eme0kFbHv93xxcajyyOsZqfbfRXLc9Ufby+FLLEqzr4PzFWD69sv3FWK873Ps9ZsJMnsUK2HrQt+M1yNyxWa/qdvqw3bkH17fGADsuwf2LMT+94v7FnH59xUxMzOSEaCe1sx70bT8Db/vx68MXKz47GOr7wPlDvYiOSzDXwfmLsXx6xWe5xtKYibk0ZvK2iN9OaDkpp3uThbG53b5Q3wPRLAuxHLznHLb90ytdl3t8DWZiXoOZnBD1GTjGp1PSxUxMzOSUiO+Bxz42dnwDH3rHTEzM5ISktkLbN1l0NsycfNbB5/1K378bMxnuz21lNZOkAvb9Xpgj7v1wI62Dz/uVvn83ZjLcn9vJaiZxAm4PNFmeHz8Q2jdZdDbILyZwHfovl5mYmMlJUQLeHSi2ujaOPDc2Wdi37Dkutf5ifJZgX4dBnFouMzExk9MiHQu9/Rfj+FKfTRbmFzm+cSib7UsfHZe+dRI0y/fUdl7ft6/LTEzMpIOoAQ98piLno6Xlus5LHRzfUzvYqdqYiYmZdBAj4PaQ8UbHt+o+X3jhuEH7eYS9zjZYVbbvqa0G+lg4M7GtIjM5Kcp74N2bmsXR1gn7B6rf/MKLjt+7ar+u7VLHOri+p7bzr9ax3BfMxMRMTou0G6n5dtbjtbR/oNp6KPhoXOtQ+XxPrddyD2+BmZi3wEzeks5+YPsHqivroeCTr0Ok5TITjz9X5kzSCdj+geqG/VBw+xdE2tmva17qXocwfZfLTHz+XJEzSStg8wPV7qtbvyDS57qWS93r4PM9tZab8vu79f1zzMRy9cxnkk7A9g9UO9k+UP327oEOS3Cug8/31Nr4/d36/jlmYsp9JgkFbP1AdcPxberW9/lv7Iq3X7fbOrz1q+3ycsf5d+v755gJM2klFLCL64WNx654+3V9Pjrt8T21U2AmpjJnohCwx6e/xjrmJfR7d4bGTCzrU+RMBAJ2PKrZ+ey2V8ZMTEXORCBgx6Oa9cA5B/t1fZaQGGZiKnMmAgHbOQ6c87hu5yW4T4IWdmaIwTETU+4zEQjYuWXPduCcdUuk/brhh94FnhkiADMxlTmTdAL2PFOu/cA55344y3W9ztZrX2WPsyesb3u842Imtj/ETF5JJ2Anx8sS64Fzji2R9oPsvM7Waxur39kT6tsyTg7TFzOxrU+JMxEI2IvPlkgv1rH67h5oru934v0hMBNTNjNJK+Dg7X3hZ9x/Yx0C72rNV2rd+e98ZCY+69NRPjNJKmD3R7Kn267p2ubY8672arm7P+n74Rtm0nV9ipxJWgFbt/dNu13TsSXSHKvnhoxh14eZMJOtpAJ2bDH0OVNu8Isrr4+F2w+Jt+r7dQDMpOv6lDmTpAK2b+/z2Ybns9veZx0ct+Z1vsKeb4uYScf1KXMmaQVsZ9+Gt7x4XBgb/Fy77W3XdVxqF3zGwwE2mxzeNDM5VuRMFAK2ql/CbB9Gjy+174q3X9dyqd0AZzycADMx5T6TtALueuqRavuO58J8DHXttrdc170Ecx2mPOPhEWZiYiZ7SQVsP/WI/R1Efd1F122O9us6L7WswwBnPOy52YSZmJjJi6QCtv0Kmv1qLfP0YecP7QnAOrBf13qpY4ODfZOFx57HvptNmInlzzGTvaQCtp96pO/OhiHXwc7rO2L7vrhiJh3Xp8yZpBWwxzGjPp/a8PrV+qyDx57H3i+umEnY+mQ+k7QCttqeY7N+WDq63ONTG+a+NZ/jY4b5jliP/YanMRPbKpU4E4GA67c357+/t26F39x3+zzmsPsbX99+50fhgTETU5EzSSdg9wlJmm+Msgy12VxnPFCFHdD+1jrEwExMzORAOgG7zesHr/nxI+tbH53usLnA6xDz5gH0jXdS/9bp0X3Y74hlJqYiZ5JUwI6zGrXvajZfWd7bGB+7dGwuCHwJM7+q9l82/eq2btvbX113+NU6d3KcxExMzORFUgH7H9w+77S5wOs03vbvojO/bqpZ6Or9g/GQ79B7JwczMTGTvaQC9ntfsfvo9CHrY6jjZYn1mBfHd9GZv5j2UuubrkExExMzeZFUwBbbv77lG1P3H53uwP7I6jgLsOXb7Ny/mI4fHx92owczsS6tzJnIBvzG1U2ux1vbMS/m6c7e+sUMtA/TCzMxFTuTpAK2vIRx/2LsGxw83h25zhhsvrexbomc6M7KTEzM5EVCAVu3wDl/Ma6XOx4vQMKOA/I915H922tPYCYmZvJaQgG731dY39v47C8zH4V7fSlACPt3AXT4c8zE/HPMZC+pgC08H1ntrNddOna2jfRddAN+VoaZOBZV4kzSCtg8y4H7BYh9g4PH97G3L8aMX8AApzuz6/tdAMzExEz2kgrYfpYDf8dbKN54FF7fdvqGunB9d5kwExMzeZFUwEMdG9v1ELlme8Hx490AJ0UZFDMxMZMXSQXc+SwHJ7bsLTseeG69oUE/ozoAZmJiJntpBexzMLn1bPe739jpDXkTn3+l6r/Rg5mYmMleWgF76PwyyvEo3NwHpvww52gbPV7fBjMxbyPzmcgG7PXJEYfmkABjm1+vgwtOm+KMwczElPtM0grY5zwJ1rPde2/eWHb4lMkgQk7gxkyMP8hMdpIKOPQLIt0H2dk1D6LHr1VGe9PTc6MHMzExkxdJBexz+k3nEqwX2b+I2Xqywr4HF4yEmZiYyYukAvY6/WbX9yD2X4z9GNeJvqDaBzMxMZMXSQXsd8Ju2xkRbB/ysj+yTqy5ty16fUMdMzExk720AvbQ+T1IEr+Y5v1ac9jAfNTXXczElPtMZAPu/B7E9+WOx1dXdrb57cP28KGRD71jJqbMZ5JOwJ4DdBz0Hbx3bqgD5Q80j+7tCUc976zMxPLnmMlr6QQ8iPC9c0MdKG8stP2Cym7f8z4sZmK58WxmklvAnd/xOB/HPb42srt6oc2D9fb7tybGTEz5zCSdgH3OK+g+/Wb43rlRvoiqXuj5Q/26zfO+ykxMzOSAaMCuMxWl8pVTA2EmJmZyQDNg95mKfIx0VqMBMRMTMzmgGnDlOFORxxGqjg9uhX3x5LCYiYmZHBAOuLKcqcjnhN32D26FHig/KGZiYiYHhAO2nanI572N44z7wQfKD4iZmJjJgYQC9v0q5eAHP+sHt7wOlB8bMzExkwPpBOxjzDMVjbJ7YALMxFTATDQDdp6pKJ/dA/6YiSn/mYgG3LCeqajVcQvFSGc1iomZmPKeiXDAleVMRVsdvyPWPB62fVmU8q+rA2ZiyngmwgHbzlS0+3+6fU7F8gbJ8ZuWwUxMec9ENGDXmYo6n7C7YT0etl5C/C0TvTATU/4z0Qx4kG9tdW7ImCfwjRn+mImpgJloBjw288gdMBNTAjPJKWDPvX7Oq8+7vrYSwExMWc0ku4A9Tktm3YtQv2uK/7poOMzElNVMCg7Y9t5mmcaWieEwE1NWMyk4YIuE9u8NhJmYspqJeMD1C5mXh8IkzuwbHzMx5TsT8YAP+J7ZN5GPZI+KmZiymklOAXtK5SPZKWEmprRnUnDAqXwkOyXMxJT2THQDXl48Luxf/NhRKh/JHhAzMWU+E9mAN/d327ONhSwiiY9kD4eZmHKfiWzAzQubC+NUY2VjJqbcZyIbcP3Iukh300IczMSU+0xkA66W9Rub9oug9ny/t26Mr6eKi5mYMp+JbsB27Wc3u+ykbz4p2sr2sXmPmZiymUlmAfs8Wo55ysKUMBNTPjPRDNj5ImhzP8aXPkpgJqYCZqIZsFu7yb/jaRiSPtvggJiJKZuZ5Bawh/Bvac8PMzGlPRPNgH0PR7cvJOn3Nt6YiamAmWgG7ObzyZHwb2nXwExM2cwks4B9PjmSz9drvI2ZmPKZiW7A1u9NT/uTI6NjJqbMZyIbsP1709P+5MjYmIkp95noBmz93vS0PzkyNmZiyn0msgHbvze9s0G2T6aGmZhyn4lswPbvTS8cMzFlPhPNgJ3febO+bX5T9WumSVcnCczEVMBMNANuD2+zvoNZXZ///r7rMXKZYSam7GeiGnDVftDL9r5knuq7lSkwE1PeMxEOuLJ9O9y8fsCd5/DI2hszMWU8E+GAl5bPk2zf1Wy+yuGxtQ9mYsp7JqIBN7vxctiLNyRmYsp/JpoBp/0BkTiYiamAmWgG3D6yGtsgmoNukj7wfFzMxJT/TEQDbjSnG8tgK8SgmIkp75kIB1w12ycyeAwdGDMxZTwT4YCbrYsHR8gV8I7nFGZiynsmogE3L4uML6zK6oub/TETU/4z0QzYfoxrVr8Yb8zEVMBMNAO2y+oXMxBmYspqJgScN2ZiymomWQWc+oevI2AmpqxmklPAQHEIGBCmGXBWL4IGwkxMBcxEM2AALQIGhOkGbD3jfuGYiSnzmcgGbD/jftmYiSn3megGbD/jftGYiSn3mcgGHHjG/SwxE1PuM5ENOPcz7vfCTEyZz0Q3YAAEDCjTDXiZ9+6BXpiJKfOZyAa8vr2LvQrJYSam3GeiG3BOJzYaCDMx5T4T2YCrRb6nCu2NmZgyn4lswPmcmns4zMSU+0xkAwYgHHDu7236YCam3GciG3A1z3vrYi/MxJT5TGQDzv29TR/MxJT7TGQDBkDAgDTdgDf3s8t/zvZTYv0wE1PmM5ENeHN/s7x8Wlw+xV6RhDATU+4zkQ14/fGh/sXk+0HtPpiJKfeZyAa8fWSdZ/vI2gczMeU+E9mAm/c2s1m2v5d+mIkp85noBgyAgAFlsgFvj3HNd+NEH8zElPtMRANeXe++tCrfNzfemIkp/5mIBpz/p0z6YCam3GciGzAA4YDXt825ute/zvW9TR/MxJT7TGQDrt/enP/+fpb3CY98MRNT5jPRDbiq5vl+yrM3ZmLKeia6Ac9nl0/zfB9Ze2EmpsxnIhvw9l3N5qt8H1v9MRNT7jORDRgAAQPSNANu987Pb3I+RM4bMzEVMBMCzgUzMRUwEwLOBTMxFTATAs4FMzEVMBMCzgUzMRUwEwLOBTMxFTAT0YBvdx/zzPkgOU/MxFTATDQDBtAiYEAYAQPCCBgQRsCAMAIGhBEwIIyAAWEEDAgjYEAYAQPCCBjoYN4eUn3+6nta1rd37X9ay/OH/b87nb7G3rLrNQkY6GDefj3a4vzwm5ZeB3x6Gd0D7n5NAgY62Aa8/aKWFwQMSHgOePeyuf6v/b8v6pfWv9u+hF7f/sPtbNbEN99euP3D9TVmN9X+2s2/r66ba94033969/oa7Z9vLu34hagEDHSwewl9VRkBzy8eq+XsOeC62eZ19vOF7Z9tLlhd37TXfv731XVzzeZzyovmP/trbP88z8DAoOb7Lwo/Cnh13T7hPgfcPrm+XNj80e3r7uXFY/uHdv/e5Frt/uvu1TWeLyBgYEDbZ+Dl7Oo44GV7so/lc8Db/29/YbX/sc1y/+9t4s//9foa+2V3Q8BAB9uAm5fGRwEvbAEvDgLendanDfj53w8DfnUNAgaGtwt4YQTc9Rm42v4fz/9ueQauDt9fd0PAQAfPz8CXT6/fp+7fAy8OA95f2PyZfY2vyzwI+PU1CBgY3vN74Ltqc3/5tLmf7bdCN5m+bIXeBmhuhX7ezPX87wcBH1yj2m/r6oKAgQ5eHUrZnKz2H1z7gXcBN9e/+Mfnk9kutie23e8Hrv/9MOCDa7QPAOwHBiJbTnA2agIGBtc+q3Z/HRyAgIHhtTuGOn/2KAABA8IIGBBGwIAwAgaEETAgjIABYQQMCCNgQBgBA8IIGBBGwIAwAgaEETAgjIABYQQMCCNgQBgBA8IIGBBGwIAwAgaEETAgjIABYQQMCCNgQBgBA8IIGBBGwIAwAgaEETAgjIABYQQMCCNgQBgBA8IIGBBGwIAwAgaEETAg7P8DskfczR2RPaIAAAAASUVORK5CYII=" /><!-- --></p>
<p>This also provides a sense check. The rebuild happens during <code>timestep 2</code> (because <code>rebuild_monies = c(0, 5e6, 0)</code>), all building components are rebuilt to <code>grade = N</code> thus have zero <code>cost</code>. During the next timestep there will be some deterioration to <code>grade = A</code>, however all building components of excellent condition do not contribute to the repair costs of a block, hence no cost of repairs in <code>timestep 3</code>. We start to see condition <code>grade = B &amp; D</code> at <code>timestep 5</code> as expected given our working knowledge of the model.</p>
</div>
</div>
<div id="repairs" class="section level2">
<h2>Repairs</h2>
<p>Repairs are carried out by the <code>repair</code> function which is internal to <code>blockbuster</code>. The repairing of the <code>blockbuster_tibble</code> you pass as an argument is dependent on the other argument; <code>repair_monies</code>. The latter can be passed as a vector equal in length to the number of years you are simulating (<code>forecast_horizon</code>) or as a number. This allows you to control for inflation in the construction industry and variable repairs spending from year to year. Technically the <code>blockbuster</code> function makes use of the <code>repair_monies</code> by dividing it up evenly between each block in the input <code>blockbuster_tibble</code>.</p>
<p>All the blocks (unique based on <code>buildingid</code>) in the <code>blockbuster_tibble</code> are ranked in descending order by <code>buildingid</code>, <code>grade</code> (from E to N) and <code>cost</code> (expensive to cheapest repairs within <code>grade</code>). Each block is repaired with <code>repair_monies</code> divided by the number of blocks in the <code>blockbuster_tibble</code>. Money is spent on worse condition grade (ignoring E as it cannot be repaired [ignoring N and A also]) and most expensive repairs first until the remaining money is less than the cheapest building component to repair, at which point it is discarded (NOT passed to <code>rebuild_monies</code>; assumed spent by the school on other things) (see the help function <code>what_needs_repair_within_block()</code> for details on the decision making).</p>
<div id="example---compare-different-spending-profiles-on-condition-of-blocks" class="section level3">
<h3>Example - compare different spending profiles on condition of blocks</h3>
<p>The purpose of this package is to inform policy decision making to determine which out of competing spending profiles will better meet the assessment criteria. Here we aim to minimise the total condition cost of repairs in the 3 school blocks. We develop two spending profiles using the same amount of money over five years (ignoring inflation for simplicity). Remember, the user is free to develop their own assessment criteria given the flexibility of the model output (e.g. you could use the <code>unit_area</code> of critical building components).</p>
<p>We could compare using some graphics already demonstrated in the vignette. Instead we prefer to reorganise the data to answer our specific question: which of our competing spending profiles produces the lowest estimated total repairs cost in year 5? We use arbitary blocks and total repair spend profile (this is not intended to be realistic but instead demonstrative). Inspect the code chunk, specifically the <code>repair_monies</code> argument for each spending profile, as it is where they differ.</p>
<ul>
<li>Drip - slow and steady - consistent amount spent each year.</li>
<li>Flood - sooner rather than later - spending more sooner, less later.</li>
</ul>
<div id="run-the-simulations" class="section level4">
<h4>Run the simulations</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#  We filter our PDS sample for just three blocks to keep things simple</span>
<span class="co">#  using identical blocks to our rebuild example above.</span>

x &lt;-<span class="st"> </span>dplyr::<span class="kw">filter</span>(blockbuster::blockbuster_pds,  buildingid ==<span class="st"> </span><span class="dv">4382</span> |<span class="st"> </span>buildingid ==<span class="st"> </span><span class="dv">4472</span>
                   |<span class="st"> </span>buildingid ==<span class="st"> </span><span class="dv">4487</span>)
<span class="co">#  Repair spending profile of different strategies</span>
drip_repairs &lt;-<span class="st"> </span><span class="kw">blockbuster</span>(x, <span class="dt">forecast_horizon =</span> <span class="dv">5</span>,  <span class="co">#  sum(rep(3e4, 5))</span>
                            <span class="dt">repair_monies =</span> <span class="kw">rep</span>(<span class="fl">3e4</span>, <span class="dv">5</span>))  <span class="co">#  £10k / block / year = £ 15e5</span>

flood_repairs &lt;-<span class="st"> </span><span class="kw">blockbuster</span>(x, <span class="dt">forecast_horizon =</span> <span class="dv">5</span>,
                             <span class="dt">repair_monies =</span> <span class="kw">c</span>(<span class="fl">6e4</span>, <span class="fl">6e4</span>,
                                               <span class="fl">1e4</span>, <span class="fl">1e4</span>, <span class="fl">1e4</span>))  
<span class="co">#  (20k, 20k, 5k, 5k, 5k)* 3 blocks = £ 10.5e5</span></code></pre></div>
<p>Sometimes it is convenient to save these objects and then use them again later. If we were to <code>saveRDS</code> then <code>readRDS</code> we could use the <code>attributes()</code> function to find out the spending profile inputs of the <code>blockbuster_list</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">attributes</span>(drip_repairs)</code></pre></div>
<pre><code>## $class
## [1] &quot;blockbuster_list&quot; &quot;list&quot;            
## 
## $rebuild_cost_rate
## [1] 1274 1274 1274 1274 1274
## 
## $rebuild_monies
## [1] 0 0 0 0 0
## 
## $repair_monies
## [1] 30000 30000 30000 30000 30000</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">attributes</span>(flood_repairs)</code></pre></div>
<pre><code>## $class
## [1] &quot;blockbuster_list&quot; &quot;list&quot;            
## 
## $rebuild_cost_rate
## [1] 1274 1274 1274 1274 1274
## 
## $rebuild_monies
## [1] 0 0 0 0 0
## 
## $repair_monies
## [1] 60000 60000 10000 10000 10000</code></pre>
</div>
<div id="manipulate-data-for-assessment-statistic-of-interest-total-cost-of-repairs" class="section level4">
<h4>Manipulate data for assessment statistic of interest (total cost of repairs)</h4>
<p>This consistent repair spend profile can be visually compared by the user to a spending profile that invests more heavily sooner rather than later. However, we need to organise the data into a convenient form for comparison.</p>
<p>First we convert our list of dataframes into one dataframe (for each spending profile).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">drip &lt;-<span class="st"> </span>dplyr::<span class="kw">bind_rows</span>(drip_repairs)
flood &lt;-<span class="st"> </span>dplyr::<span class="kw">bind_rows</span>(flood_repairs)</code></pre></div>
<p>Then we group by timestep and sum the total cost of repairs across all the blocks. We pretend you might want to compare many spending profiles here and thus demonstrate an approach that can be scaled. The model comparison of spending profiles suggests that the flood approach is slightly better when judged by the year 5 <code>total_cost</code> of repairs statistic generated using simple data manipulation and aggregation by the analyst. Not much difference at year 1 suggests that the “spend early” strategy may have over spent at year 1. This could be explored by further investigation or even automation to optimise the problem, given enough time or computation power.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dripping &lt;-<span class="st"> </span>drip %&gt;%<span class="st">  </span><span class="co">#  extracat::visna(drip, sort = &quot;b&quot;)</span>
<span class="st">  </span><span class="kw">group_by</span>(timestep) %&gt;%<span class="st">  </span><span class="co">#  drip_missing &lt;- drip %&gt;% filter(!complete.cases(.))</span>
<span class="st">  </span><span class="co">#  table(drip_missing$timestep)  #  the originals rows are not being given this variable</span>
<span class="st">  </span><span class="co">#  maybe this is OK and makes sense, block can't be rebuilt at timestep 0, therefore NA cost</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">total_cost =</span> <span class="kw">sum</span>(cost))

flooding &lt;-<span class="st"> </span>flood %&gt;%
<span class="st">  </span><span class="kw">group_by</span>(timestep) %&gt;%
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">total_cost =</span> <span class="kw">sum</span>(cost))

<span class="co">#  we can join them and create an ID variable</span>
spending_profile_ts &lt;-<span class="st"> </span>dplyr::<span class="kw">bind_rows</span>(<span class="st">&quot;drip&quot;</span> =<span class="st"> </span>dripping, <span class="st">&quot;flood&quot;</span> =<span class="st"> </span>flooding,
                                        <span class="dt">.id =</span> <span class="st">&quot;spend_profiles&quot;</span>)

spending_profile_ts</code></pre></div>
<pre><code>## # A tibble: 12 × 3
##    spend_profiles timestep total_cost
##             &lt;chr&gt;    &lt;dbl&gt;      &lt;dbl&gt;
## 1            drip        0   134495.5
## 2            drip        1   226010.9
## 3            drip        2   318056.1
## 4            drip        3   431088.3
## 5            drip        4   553931.9
## 6            drip        5   680727.0
## 7           flood        0   134495.5
## 8           flood        1   216011.0
## 9           flood        2   294095.6
## 10          flood        3   410501.3
## 11          flood        4   538159.6
## 12          flood        5   670361.6</code></pre>
</div>
<div id="visualise" class="section level4">
<h4>Visualise</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p8 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(spending_profile_ts, <span class="kw">aes</span>(timestep,
                                total_cost,
                                <span class="dt">colour =</span> spend_profiles,
                                <span class="dt">group =</span> spend_profiles)) +
<span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">size =</span> <span class="dv">2</span>)

  p8 &lt;-<span class="st"> </span>p8 +<span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;Total cost of repairs (£)&quot;</span>) +<span class="st"> </span><span class="kw">xlab</span>(<span class="st">&quot;Years&quot;</span>) +
<span class="st">  </span>govstyle::<span class="kw">theme_gov</span>() +<span class="st"> </span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">plot.margin =</span> <span class="kw">unit</span>(<span class="kw">c</span>(<span class="dv">20</span>,<span class="dv">10</span>,<span class="dv">10</span>,<span class="dv">10</span>),<span class="st">&quot;mm&quot;</span>)) +
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;top&quot;</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(p8)</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>The simulations suggest that on average investing sooner rather than later with the “flood” strategy is slightly superior at reducing total repair costs in five years time.</p>
</div>
</div>
</div>
<div id="rebuilding-versus-repairing---how-to-best-invest" class="section level2">
<h2>Rebuilding versus repairing - how to best invest?</h2>
<p>Now we have both the <code>rebuild</code> and <code>repair</code> functions we can assess spending profiles that prioritise rebuilding over repairing or vice versa. Again to compare meaningfully we need an assessment criteria to compare our different approaches.</p>
<p>Let’s use all our money to rebuild one of the blocks or use all the money to repair each block over the five years instead.</p>
<ul>
<li>Rebuild one block at year one then do nothing<br />
</li>
<li>Repair each block over the five years using block rebuild investment</li>
</ul>
<p>We use the same arbitary grouping of blocks to demonstrate. We do our analysis in one code chunk this now that you are familiar.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#  Repair spending profile of different strategies</span>

<span class="co">#  rebuild most expensive block in first year</span>
rebuild_once &lt;-<span class="st"> </span><span class="kw">blockbuster</span>(x, <span class="dt">forecast_horizon =</span> <span class="dv">5</span>,  
                            <span class="dt">rebuild_monies =</span> <span class="kw">c</span>(<span class="dv">2440984</span>, <span class="kw">rep</span>(<span class="dv">0</span>, <span class="dv">4</span>))) %&gt;%
<span class="st">  </span>dplyr::<span class="kw">bind_rows</span>() %&gt;%
<span class="st">  </span><span class="kw">group_by</span>(timestep) %&gt;%
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">total_cost =</span> <span class="kw">sum</span>(cost, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))

<span class="co">#  repair funding using same funds spread over five years</span>
drip_fix &lt;-<span class="st"> </span><span class="kw">blockbuster</span>(x, <span class="dt">forecast_horizon =</span> <span class="dv">5</span>,
                             <span class="dt">repair_monies =</span> <span class="kw">rep</span>(<span class="dv">2440984</span>/<span class="dv">5</span>, <span class="dv">5</span>)) %&gt;%<span class="st"> </span>
<span class="st">  </span>dplyr::<span class="kw">bind_rows</span>() %&gt;%
<span class="st">  </span><span class="kw">group_by</span>(timestep) %&gt;%
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">total_cost =</span> <span class="kw">sum</span>(cost, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))

<span class="co">#  we can join them and create an ID variable</span>
spending_profile_ts &lt;-<span class="st"> </span>dplyr::<span class="kw">bind_rows</span>(<span class="st">&quot;Repairs only&quot;</span> =<span class="st"> </span>drip_fix,
                                        <span class="st">&quot;Rebuild only&quot;</span> =<span class="st"> </span>rebuild_once,
                                        <span class="dt">.id =</span> <span class="st">&quot;spend_profiles&quot;</span>)

p9 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(spending_profile_ts, <span class="kw">aes</span>(timestep,
                                total_cost,
                                <span class="dt">colour =</span> spend_profiles,
                                <span class="dt">group =</span> spend_profiles)) +<span class="st"> </span><span class="kw">geom_line</span>(<span class="dt">size =</span> <span class="dv">2</span>)

  p9 &lt;-<span class="st"> </span>p9 +<span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;Total cost of repairs (£)&quot;</span>) +<span class="st"> </span><span class="kw">xlab</span>(<span class="st">&quot;Years&quot;</span>) +
<span class="st">  </span>govstyle::<span class="kw">theme_gov</span>() +<span class="st"> </span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">plot.margin =</span> <span class="kw">unit</span>(<span class="kw">c</span>(<span class="dv">20</span>,<span class="dv">10</span>,<span class="dv">10</span>,<span class="dv">10</span>),<span class="st">&quot;mm&quot;</span>)) +
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;top&quot;</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(p9)</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>The rebuild takes care of the one rebuilt block but not the other two! As a result the costs of repair begin to accelerate without any money invested in repairing the blocks. The repair focused spending profile quickly brings the condition cost down to zero after two years. The repair profile is probably overspending in the subsequent years and funding could be reduced further with some investigation.</p>
<p>CAVEAT: this is just a demonstration and should not be considered a general rule. The best strategy will depend on your assessment criteria and the blocks of interest.</p>
</div>
<div id="summary" class="section level2">
<h2>Summary</h2>
<ul>
<li>This modelling approach has the potential to make use of all the data.<br />
</li>
<li>It uses a robust statistical modelling approach.<br />
</li>
<li>The input structure is preserved in the output tibbles.<br />
</li>
<li>The model can be iteratively improved as more data is collected.<br />
</li>
<li>There is flexibility in the transition matrices that are used that should be estimated empirically in the future, data collection permitting.</li>
<li>The writing of a package allows us to enshrine business knowledge into a corpus of code that is inseparable from the documentation of that code.</li>
<li>Quality assurance is built in through the use of continuous integration and the test driven development.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sessionInfo</span>()</code></pre></div>
<pre><code>## R version 3.3.2 (2016-10-31)
## Platform: x86_64-w64-mingw32/x64 (64-bit)
## Running under: Windows 10 x64 (build 15063)
## 
## locale:
## [1] LC_COLLATE=C                           
## [2] LC_CTYPE=English_United Kingdom.1252   
## [3] LC_MONETARY=English_United Kingdom.1252
## [4] LC_NUMERIC=C                           
## [5] LC_TIME=English_United Kingdom.1252    
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
##  [1] ggthemes_3.2.0         dplyr_0.5.0            purrr_0.2.2           
##  [4] readr_1.0.0            tidyr_0.6.0            tibble_1.2            
##  [7] ggplot2_2.1.0          tidyverse_1.0.0        blockbuster_0.0.0.9001
## [10] markovchain_0.6.5.1   
## 
## loaded via a namespace (and not attached):
##  [1] Rcpp_0.12.7         plyr_1.8.4          tools_3.3.2        
##  [4] testthat_1.0.2      digest_0.6.11       memoise_1.0.0      
##  [7] evaluate_0.10       gtable_0.2.0        lattice_0.20-34    
## [10] Matrix_1.2-7.1      igraph_1.0.1        DBI_0.5-1          
## [13] yaml_2.1.14         parallel_3.3.2      expm_0.999-0       
## [16] withr_1.0.2         stringr_1.2.0       roxygen2_5.0.1     
## [19] knitr_1.15.1        devtools_1.12.0     rprojroot_1.2      
## [22] stats4_3.3.2        grid_3.3.2          data.table_1.10.4  
## [25] R6_2.2.0            rmarkdown_1.3       matlab_1.0.2       
## [28] magrittr_1.5        backports_1.0.4     htmltools_0.3.5    
## [31] scales_0.4.1        assertthat_0.1      govstyle_0.1.0     
## [34] colorspace_1.2-7    labeling_0.3        stringi_1.1.2      
## [37] lazyeval_0.2.0      RcppParallel_4.3.20 munsell_0.4.3      
## [40] crayon_1.3.2</code></pre>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
